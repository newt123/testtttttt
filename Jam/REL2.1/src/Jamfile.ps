%!PS-Adobe-3.0
%%Creator: groff version 1.09
%%CreationDate: Sat Feb  3 22:37:08 1996
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Courier
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.09 0
%%Pages: 14
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.09 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll 
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Courier
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Courier@0 ENC0/Courier RE
/Times-Bold@0 ENC0/Times-Bold RE/Times-Roman@0 ENC0/Times-Roman RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E/F1 9/Times-Bold@0 SF -.18(NA)72 84 S(ME).18 E/F2 10
/Times-Bold@0 SF -.15(Ja)108 96 S(m\214le).15 E F0 2.5<ad70>2.5 G(er)
-2.5 E(-directory)-.2 E F2(jam)2.5 E F0(\(1\) instructions)A F1
(DESCRIPTION)72 112.8 Q F0 .518(This manual page gi)108 124.8 R -.15(ve)
-.25 G 3.018(si).15 G .518(nstructions and e)-3.018 F .518
(xamples for writing a)-.15 F F2 -.15(Ja)3.018 G(m\214le).15 E F0 3.018
(,a\214)C .518(le that tells the b)-3.018 F .517(uild tool)-.2 F F2(jam)
3.017 E F0 .456(what to b)108 136.8 R 2.956(uild. It)-.2 F .456
(consists of in)2.956 F -.2(vo)-.4 G .456
(cations of rules de\214ned by the).2 F F2(jam)2.956 E F0(boilerplate,)
2.957 E F2 -.15(Ja)2.957 G(mbase).15 E F0(.)A F2 -.15(Ja)5.457 G(mbase)
.15 E F0(itself)2.957 E(de\214nes rules that pro)108 148.8 Q
(vide roughly)-.15 E F2(mak)2.5 E(e)-.1 E F0(\(1\)-lik)A 2.5(ef)-.1 G
(unctionality)-2.5 E(.)-.65 E .23(The \214rst section is a one-page o)
108 165.6 R -.15(ve)-.15 G(rvie).15 E 2.73(wo)-.25 G(f)-2.73 E F2(jam)
2.729 E F0 2.729(,t)C 2.729(oi)-2.729 G .229(ntroduce the syntax.)-2.729
F .229(The remaining sections are e)5.229 F(xam-)-.15 E
(ples and discussion.)108 177.6 Q(This description goes with)108 194.4 Q
F2 -.15(Ja)2.5 G(m).15 E F0(Release 2.1.)2.5 E F1 -.27(JA)72 211.2 S
2.25(MO).27 G(VER)-2.7 E(VIEW)-.495 E F2(In)87 223.2 Q -.1(vo)-.4 G
(cation).1 E F0 .713(The e)108 235.2 R .714(xamples in the follo)-.15 F
.714(wing sections are parts of a)-.25 F F2 -.15(Ja)3.214 G(m\214le).15
E F0 5.714(.O)C .714(nce you ha)-5.714 F 1.014 -.15(ve w)-.2 H .714
(ritten a).15 F F2 -.15(Ja)3.214 G(m\214le).15 E F0 3.214(,y)C .714
(ou can)-3.214 F(in)108 247.2 Q -.2(vo)-.4 G -.1(ke).2 G F2(jam)2.6 E F0
(to b)2.5 E(uild things.)-.2 E(The simplest syntax is:)5 E/F3 10
/Courier@0 SF(jam [-n])144 264 Q F0(The)108 280.8 Q F2(-n)2.5 E F0
(tells)2.5 E F2(jam)2.5 E F0(to do a v)2.5 E(erbose dry-run.)-.15 E F2
(Rules)87 297.6 Q F0(The)108 309.6 Q F2(jam)2.5 E F0
(language consists mostly of rule in)2.5 E -.2(vo)-.4 G 2.5(cations. A)
.2 F(rule is in)2.5 E -.2(vo)-.4 G -.1(ke).2 G 2.5(dw).1 G(ith)-2.5 E/F4
10/Times-Italic@0 SF(tar)2.5 E -.1(ge)-.37 G(ts).1 E F0(and)2.5 E F4
(sour)2.5 E(ces)-.37 E F0 5(.T)C(hat is,)-5 E F3
(Rule targets : sources ;)144 326.4 Q F0 .796
(Each rule de\214nition has potentially tw)108 343.2 R 3.296(op)-.1 G
.796(arts: the rule procedure and the rule')-3.296 F 3.295(sa)-.55 G
3.295(ctions. The)-3.295 F .795(procedure is)3.295 F 1.354(just more)108
355.2 R F2(jam)3.854 E F0 1.355
(statements to interpret when the rule is in)3.854 F -.2(vo)-.4 G -.1
(ke).2 G 3.855(d. The).1 F 1.355(actions are the shell commands to)3.855
F -.15(exe)108 367.2 S(cute when the tar).15 E(gets are to be updated.)
-.18 E(The)108 384 Q F2 -.15(Ja)2.5 G(mbase).15 E F0
(consists mostly of rule de\214nitions, and your)2.5 E F2 -.15(Ja)2.5 G
(m\214le).15 E F0(will contain mostly rule in)2.5 E -.2(vo)-.4 G
(cations.).2 E F2 -.92(Va)87 400.8 S(riables).92 E -.15(Ja)108 412.8 S
(m).15 E F0 .625(has tw)3.125 F 3.125(ot)-.1 G .625(ypes of v)-3.125 F
.625(ariables: global ones and tar)-.25 F .625(get-speci\214c ones.)-.18
F .625(The latter tak)5.625 F 3.124(ee)-.1 G -.25(ff)-3.124 G .624
(ect only when the).25 F .45(named tar)108 424.8 R .45
(get is being bound, scanned for header \214les, or updated.)-.18 F -.8
(Ta)5.45 G -.18(rg).8 G .45(et-speci\214c v).18 F .45
(ariables enable generic)-.25 F .742(actions \(lik)108 436.8 R 3.242(et)
-.1 G(he)-3.242 E F4(Cc)3.241 E F0(rule')3.241 E 3.241(sc)-.55 G .741
(all to the C compiler\) to be used for dif)-3.241 F .741(ferent tar)
-.25 F 3.241(gets. Only)-.18 F .741(the tar)3.241 F(get-speci\214c)-.18
E -.25(va)108 448.8 S(riables \(HDRS, CCFLA).25 E(GS, etc.\) v)-.4 E
(ary)-.25 E(.)-.65 E(The)108 465.6 Q F2 -.15(Ja)2.5 G(mbase).15 E F0
(rules use v)2.5 E(ariables in three w)-.25 E(ays:)-.1 E
(Procedure Input)108 482.4 Q .336(If a v)144 494.4 R .337
(ariable is procedure input, it must be set before in)-.25 F -.2(vo)-.4
G .337(king the rule.).2 F .337(This is sometimes used to)5.337 F .427
(pass additional parameters to the rule \(be)144 506.4 R .427
(yond the tar)-.15 F .426(gets and sources\), and is sometimes used for)
-.18 F 1.491(conditional de\214nitions \(e.g., if the RANLIB v)144 518.4
R 1.491(ariable is set, in)-.25 F -.2(vo)-.4 G 1.692 -.1(ke t).2 H(he).1
E F4(Ranlib)3.992 E F0 3.992(rule\). When)3.992 F(we)3.992 E
(describe the v)144 530.4 Q
(ariables in each section, we mark procedure input v)-.25 E
(ariables with a *.)-.25 E(Procedure Output)108 547.2 Q 2.965(Ar)144
559.2 S .465(ule procedure may set v)-2.965 F .465
(ariables for later use.)-.25 F .465
(Except where noted, all rules set these v)5.465 F(ariables)-.25 E .488
(speci\214c to the rule')144 571.2 R 2.988(st)-.55 G(ar)-2.988 E 2.988
(gets. Sometimes)-.18 F .489(the v)2.989 F .489
(ariable are later used during the binding and header)-.25 F
(\214le scanning phase, and sometimes the)144 583.2 Q 2.5(ya)-.15 G
(re used by the actions.)-2.5 E(Actions Input)108 600 Q .525
(The shell commands to update a tar)144 612 R .524(get often contain v)
-.18 F .524(ariable references.)-.25 F .524(These v)5.524 F .524
(ariables may be)-.25 F(set globally or tar)144 624 Q 2.5
(get-speci\214c. The)-.18 F(latter tak)2.5 E 2.5(ep)-.1 G(recedence.)
-2.5 E .397(Often, a v)108 640.8 R .397
(ariable will be used in more than just w)-.25 F .397(ay: a v)-.1 F .397
(ariable set by a rule procedure may quite lik)-.25 F .398(ely be)-.1 F
1.565(used by the actions.)108 652.8 R 1.565(In some cases, a v)6.565 F
1.565(ariable that is input to a rule procedure may be output \(tar)-.25
F(get-)-.18 E(speci\214c\) as well.)108 664.8 Q(This has the ef)5 E
(fect of freezing the v)-.25 E(ariable')-.25 E 2.5(sv)-.55 G
(alue for the tar)-2.75 E(get.)-.18 E F2(Whitespace Note)87 681.6 Q -.15
(Ja)108 693.6 S(m).15 E F0 1.615
(requires whitespace \(blanks, tabs, or ne)4.115 F 1.615
(wlines\) to surround all tok)-.25 F 1.616
(ens, including the colon \(:\) and)-.1 F .377(semicolon \(;\) tok)108
705.6 R 2.877(ens. This)-.1 F .377(is because)2.877 F F2(jam)2.877 E F0
.377(runs on man)2.877 F 2.877(yp)-.15 G .377
(latforms and no characters, sa)-2.877 F .676 -.15(ve w)-.2 H .376
(hitespace, are).15 F
(uncommon in the \214le names on all of those platforms.)108 717.6 Q
(10 March 1995)275.45 768 Q(1)198.45 E EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E/F1 9/Times-Bold@0 SF -.09(BU)72 84 S(ILDING EXECUT)
.09 E(ABLES AND LIBRARIES)-.81 E F0(The follo)108 96 Q
(wing rules compile source \214les and b)-.25 E(uild e)-.2 E -.15(xe)
-.15 G(cutables and libraries.).15 E/F2 10/Times-Bold@0 SF(Main Rule)87
112.8 Q F0(The)108 124.8 Q/F3 10/Times-Italic@0 SF(Main)2.5 E F0
(rule compiles source \214les and links the resulting objects into an e)
2.5 E -.15(xe)-.15 G 2.5(cutable. F).15 F(or e)-.15 E(xample:)-.15 E/F4
10/Courier@0 SF(Main myprog : main.c util.c ;)144 141.6 Q F0 1.18(This \
compiles main.c and util.c and links main.o and util.o into myprog.)108
158.4 R 1.18(As with all rules that compile)6.18 F(source \214les,)108
170.4 Q F3(Main)2.5 E F0
(handles header \214le dependencies automatically)2.5 E(.)-.65 E F2
(Library Rule)87 187.2 Q F0(The)108 199.2 Q F3(Libr)2.806 E(ary)-.15 E
F0 .306(rule compiles source \214les, archi)2.806 F -.15(ve)-.25 G 2.806
(st).15 G .306(he resulting object \214les into a library)-2.806 F 2.806
(,a)-.65 G .305(nd then deletes the)-2.806 F(object \214les.)108 211.2 Q
-.15(Fo)5 G 2.5(re).15 G(xample:)-2.65 E F4
(Library libstring.a : strcmp.c strcpy.c strlen.c ;)144 228 Q
(Library libtree.a : treemake.c treetrav.c ;)144 240 Q F0 .612
(This compiles \214v)108 256.8 R 3.112(es)-.15 G .612
(ource \214les, archi)-3.112 F -.15(ve)-.25 G 3.112(st).15 G .612
(hree of the object \214les into libstring.a and the other tw)-3.112 F
3.113(oi)-.1 G .613(nto lib-)-3.113 F 2.5(tree.a. Once)108 268.8 R
(the objects are safely in the libraries, the objects are deleted.)2.5 E
F2(LinkLibraries Rule)87 285.6 Q F0 1.6 -.8(To t)108 297.6 T(ell).8 E F2
(jam)2.5 E F0(to link e)2.5 E -.15(xe)-.15 G(cutables ag).15 E
(ainst libraries, you use the)-.05 E F3(LinkLibr)2.5 E(aries)-.15 E F0
2.5(rule. F)2.5 F(or e)-.15 E(xample:)-.15 E F4
(Main myprog : main.c util.c ;)144 314.4 Q
(LinkLibraries myprog : libstring.a libtree.a ;)144 326.4 Q
(Library libstring.a : strcmp.c strcpy.c strlen.c ;)144 350.4 Q
(Library libtree.a : treemake.c treetrav.c ;)144 362.4 Q F0(The)108
379.2 Q F3(LinkLibr)3.078 E(aries)-.15 E F0 .578(rule does tw)3.078 F
3.078(ot)-.1 G .578(hings: it mak)-3.078 F .577
(es the libraries dependencies of the e)-.1 F -.15(xe)-.15 G .577
(cutable, so that the).15 F(y)-.15 E .206(get b)108 391.2 R .206
(uilt \214rst; and it mak)-.2 F .207(es the libraries sho)-.1 F 2.707
(wu)-.25 G 2.707(po)-2.707 G 2.707(nt)-2.707 G .207
(he command line that links the e)-2.707 F -.15(xe)-.15 G 2.707
(cutable. The).15 F(order)2.707 E(-)-.2 E(ing of the lines abo)108 403.2
Q .3 -.15(ve i)-.15 H 2.5(sn).15 G(ot important, because)-2.5 E F2(jam)
2.5 E F0 -.2(bu)2.5 G(ilds tar).2 E(gets in the order that the)-.18 E
2.5(ya)-.15 G(re needed.)-2.5 E -1.1(Yo)108 420 S 3.018(uc)1.1 G .517
(an put multiple libraries on a single in)-3.018 F -.2(vo)-.4 G .517
(cation of the).2 F F3(LinkLibr)3.017 E(aries)-.15 E F0 .517
(rule, or you can pro)3.017 F .517(vide them in)-.15 F 1.103
(multiple in)108 432 R -.2(vo)-.4 G 3.603(cations. In).2 F 1.104(both c\
ases, the libraries appear on the link command line in the order in whi\
ch)3.603 F(the)108 444 Q 3.364(yw)-.15 G .864(ere encountered.)-3.364 F
-1.1(Yo)5.864 G 3.364(uc)1.1 G .864(an also pro)-3.364 F .864
(vide multiple e)-.15 F -.15(xe)-.15 G .864(cutables to the).15 F F3
(LinkLibr)3.364 E(aries)-.15 E F0 .864(rule, if the)3.364 F 3.364(yn)
-.15 G(eed)-3.364 E(the same libraries.)108 456 Q F2 -.92(Va)87 472.8 S
(riables).92 E F0(The follo)108 484.8 Q(wing v)-.25 E
(ariables control the linking of e)-.25 E -.15(xe)-.15 G
(cutables and the archi).15 E(ving of libraries.)-.25 E F4 78
($\(AR\) archive)144 501.6 R(command \(ar ru\))6 E 36($\(EXEMODE\) *)144
513.6 R(default value for MODE \(711\))6 E 66($\(LINK\) linker)144 525.6
R(command \(cc\))6 E 36($\(LINKFLAGS\) linker)144 537.6 R(flags \(\))6 E
42($\(LINKLIBS\) additional)144 549.6 R
(libraries that aren't dependencies \(\))6 E 66($\(MODE\) permission)144
561.6 R(on target)6 E 54($\(RANLIB\) name)144 573.6 R
(of ranlib program, if any \(ranlib\))6 E F3(Main)108 590.4 Q F0
(sets a tar)2.5 E(get-speci\214c MODE to the current v)-.18 E
(alue of $\(EXEMODE\).)-.25 E .611(The dif)108 607.2 R .611
(ference between and the ar)-.25 F .611(guments to)-.18 F F3(LinkLibr)
3.111 E(aries)-.15 E F0 .611(and the v)3.111 F .612
(alue of $\(LINKLIBS\) is that the for)-.25 F(-)-.2 E 1.009(mer are e)
108 619.2 R 1.009(xpected to be real, b)-.15 F 1.009(uildable libraries\
, while the latter are just handed without inspection to the)-.2 F .493
($\(LINK\) command.)108 631.2 R .493
(The ordering on the link command line is \214rst)5.493 F F3(LinkLibr)
2.994 E(aries)-.15 E F0 .494(and then $\(LINKLIBS\).)2.994 F -.15(Fo)108
643.2 S 2.5(re).15 G(xample:)-2.65 E F4(Main xprog : xprog.c ;)144 660 Q
(LinkLibraries xprog : libxutil.a ;)144 672 Q
(LINKFLAGS on xprog = -Bstatic ;)144 684 Q
(LINKLIBS on xprog = -lXext -lX11 ;)144 696 Q
(Library libxutil.a : xtop.c xbottom.c xutil.c ;)144 720 Q F0
(10 March 1995)275.45 768 Q(2)198.45 E EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E 1.02(This e)108 84 R 1.02(xample uses the)-.15 F/F1
10/Times-Bold@0 SF(jam)3.52 E F0 1.02(syntax "v)3.52 F(ariable)-.25 E/F2
10/Times-Italic@0 SF(on)3.52 E F0(tar)3.52 E 1.02(get" to set a tar)-.18
F 1.02(get-speci\214c v)-.18 F 3.52(ariable. In)-.25 F 1.02(this w)3.52
F(ay)-.1 E 3.52(,o)-.65 G(nly)-3.52 E .413(xprog will be link)108 96 R
.413(ed with these special $\(LINKFLA)-.1 F .414
(GS\) and $\(LINKLIBS\), e)-.4 F -.15(ve)-.25 G 2.914(ni).15 G 2.914(fo)
-2.914 G .414(ther e)-2.914 F -.15(xe)-.15 G .414(cutables were).15 F
(going to be b)108 108 Q(uilt by the same)-.2 E F1 -.15(Ja)2.5 G
(m\214le).15 E F0 5(.T)C(he actual link command line w)-5 E
(ould look lik)-.1 E 2.5(et)-.1 G(his:)-2.5 E/F3 10/Courier@0 SF
(cc -Bstatic -o xprog xprog.o libuxtil.a -lXext -lX11)144 124.8 Q F0
(Note that the def)108 141.6 Q(ault link command is cc.)-.1 E/F4 9
/Times-Bold@0 SF(COMPILING)72 158.4 Q F0 .194
(Compiling of source \214les occurs normally as a byproduct of the)108
170.4 R F2(Main)2.694 E F0(or)2.694 E F2(Libr)2.694 E(ary)-.15 E F0
2.694(rules. If)2.694 F .194(you w)2.694 F .194(ant to con-)-.1 F .821
(trol the compiling process with \214ner granularity)108 182.4 R 3.321
(,y)-.65 G .821(ou can use the rules described here.)-3.321 F F2(Main)
5.822 E F0(and)3.322 E F2(Libr)3.322 E(ary)-.15 E F0(use these rules.)
108 194.4 Q F1(Objects Rule)87 211.2 Q F0(The)108 223.2 Q F2(Main)3.714
E F0(or)3.714 E F2(Libr)3.714 E(ary)-.15 E F0 1.213(rules call the)3.713
F F2(Objects)3.713 E F0 1.213(rule on each of their source \214les.)
3.713 F -1.1(Yo)6.213 G 3.713(uc)1.1 G 1.213(an also call)-3.713 F F2
(Objects)3.713 E F0(directly)108 235.2 Q 5(.F)-.65 G(or e)-5.15 E
(xample:)-.15 E F3(Objects a.c b.c c.c ;)144 252 Q F0
(This compiles a.c into a.o, b)108 268.8 Q(.c into b)-.4 E(.o, etc.)-.4
E F1(Object Rule)87 285.6 Q F2(Objects)108 297.6 Q F0 .968(gets its w)
3.468 F .968(ork done by calling the)-.1 F F2(Object)3.468 E F0 .969
(rule on each of the source \214les, making the assumption)3.468 F .132
(that the object name itself will be the source \214le name, with the s\
uf)108 309.6 R .132(\214x replaced appropriately)-.25 F 5.132(.T)-.65 G
2.632(oc)-5.932 G .132(ompile a)-2.632 F(single source \214le directly)
108 321.6 Q 2.5(,u)-.65 G(se the)-2.5 E F2(Object)2.5 E F0 2.5(rule. F)
2.5 F(or e)-.15 E(xample:)-.15 E F3(Object foo.o : foo.c ;)144 338.4 Q
F0(The)108 355.2 Q F2(Object)2.849 E F0 .349(rule doesn')2.849 F 2.849
(tr)-.18 G .349(equire that the object name bear an)-2.849 F 2.85(yr)
-.15 G .35(elationship to the source.)-2.85 F .35(It is thus possible)
5.35 F(to compile the same \214le into dif)108 367.2 Q(ferent objects.)
-.25 E -.15(Fo)5 G 2.5(re).15 G(xample:)-2.65 E F3(Object a.o : foo.c ;)
144 384 Q(Object b.o : foo.c ;)144 396 Q(Object c.o : foo.c ;)144 408 Q
F0(This compiles foo.c \(three times\) into a.o, b)108 424.8 Q
(.o, and c.o.)-.4 E(Later e)5 E(xamples sho)-.15 E 2.5(wh)-.25 G .5 -.25
(ow t)-2.5 H(his is useful.).25 E(The)108 441.6 Q F2(Object)2.811 E F0
.311(rule looks at the suf)2.811 F .31(\214x of the source \214le and c\
alls the appropriate rules to do the actual compil-)-.25 F 3.431
(ing. This)108 453.6 R(in)3.431 E -.25(va)-.4 G .931(riably in).25 F -.2
(vo)-.4 G(lv).2 E .931(es a call to the)-.15 F F2(Cc)3.431 E F0 .931
(to turn the .c into a .o, b)3.431 F .932
(ut may also require a call to other)-.2 F .257
(rules to turn the source \214le into a .c.)108 465.6 R .257(Thus the)
5.257 F F2(Object)2.757 E F0 .257
(rule is responsible for the generation of an object \214le)2.757 F
(from an)108 477.6 Q 2.5(yt)-.15 G(ype of source.)-2.5 E -.15(Fo)5 G 2.5
(re).15 G(xample:)-2.65 E F3(Object grammar.o : grammar.y ;)144 494.4 Q
(Object scanner.o : scanner.l ;)144 506.4 Q(Object fastf.o : fastf.f ;)
144 518.4 Q(Object util.o : util.c ;)144 530.4 Q F0 .435
(In addition to calling the compiling rule,)108 547.2 R F2(Object)2.935
E F0 .435(sets up a b)2.935 F .435(unch of v)-.2 F .436
(ariables speci\214c to the source and tar)-.25 F(-)-.2 E(get \214les.)
108 559.2 Q(These are discussed belo)5 E -.65(w.)-.25 G F1(Cc, C++, Y)87
576 Q(acc, Lex, F)-.85 E(ortran, As, etc. Rules)-.25 E F0(The)108 588 Q
F2(Object)3.26 E F0 .76(calls compiling rules speci\214c to the suf)3.26
F .76(\214x of the source \214le.)-.25 F .76(Because the e)5.76 F .76
(xtra w)-.15 F .76(ork done by)-.1 F(the)108 600 Q F2(Object)2.961 E F0
.461(rule, it is not al)2.961 F -.1(wa)-.1 G .462
(ys useful to call the compiling rules directly).1 F 5.462(.B)-.65 G
.462(ut the adv)-5.462 F .462(enturous user might)-.15 F(attempt it.)108
612 Q -.15(Fo)5 G 2.5(re).15 G(xample:)-2.65 E F3
(Yacc grammar.c : grammar.y ;)144 628.8 Q(Lex scan.c : scan.l ;)144
640.8 Q(Cc prog.o : prog.c ;)144 652.8 Q F0(These e)108 669.6 Q
(xamples indi)-.15 E(vidually run)-.25 E F1(yacc)2.5 E F0(\(1\),)A F1
(lex)2.5 E F0(\(1\), and the C compiler on their sources.)A F1
(UserObject Rule)87 686.4 Q F0(An)108 698.4 Q 3.493<798c>-.15 G .993
(les with suf)-3.493 F<8c78>-.25 E .993(es not understood by the)-.15 F
F2(Object)3.493 E F0 .993(rule are passed to the)3.493 F F2(UserObject)
3.493 E F0 3.493(rule. The)3.493 F(def)3.492 E(ault)-.1 E 1.015
(de\214nition of)108 710.4 R F2(UserObject)3.515 E F0 1.015
(simply emits a w)3.515 F 1.015(arning that the suf)-.1 F 1.015
(\214x is not understood.)-.25 F 1.015(This rule de\214nition is)6.015 F
(intended to be replaced with one that recognizes the suf)108 722.4 Q
2.5(\214x. F)-.25 F(or e)-.15 E(xample:)-.15 E(10 March 1995)275.45 768
Q(3)198.45 E EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E/F1 10/Courier@0 SF(rule UserObject)144 84 Q({)144 96
Q(switch $\(>\))168 108 Q({)168 120 Q(case *.s)168 132 Q 6(:A)24 G 6(s$)
-6 G(\(<\) : $\(>\) ;)-6 E(case *)168 144 Q 6(:E)36 G
(CHO "unknown suffix on" $\(>\) ;)-6 E(})168 156 Q(})144 168 Q(rule As)
144 192 Q({)144 204 Q(DEPENDS $\(<\) : $\(>\) ;)168 216 Q(})144 228 Q
(actions As)144 252 Q({)144 264 Q(as -o $\(<\) $\(>\))168 276 Q(})144
288 Q(Library libsys.a : alloca.s memcpy.s ;)144 312 Q F0
(It should be mentioned that this e)108 328.8 Q(xample is contri)-.15 E
-.15(ve)-.25 G(d, in that the).15 E/F2 10/Times-Bold@0 SF(.s)2.5 E F0
(suf)2.5 E(\214x is already handled by)-.25 E/F3 10/Times-Italic@0 SF
(Object)2.5 E F0(.)A F2(LibraryFr)87 345.6 Q(omObjects Rule)-.18 E F0
.602(Sometimes the)108 357.6 R F3(Libr)3.102 E(ary)-.15 E F0(rule')3.102
E 3.102(ss)-.55 G(traightforw)-3.102 E .601
(ard compiling of source into object modules to be archi)-.1 F -.15(ve)
-.25 G 3.101(di).15 G(sn')-3.101 E(t)-.18 E<8d65>108 369.6 Q .078
(xible enough.)-.15 F(The)5.078 E F3(Libr)2.578 E(aryF)-.15 E -.45(ro)
-.55 G(mObjects).45 E F0 .078(rule does the archi)2.578 F .078
(ving \(and deleting\) job of the)-.25 F F3(Libr)2.578 E(ary)-.15 E F0
.078(rule, b)2.578 F(ut)-.2 E(not the compiling.)108 381.6 Q
(The user can mak)5 E 2.5(eu)-.1 G(se of the)-2.5 E F3(Objects)2.5 E F0
(or)2.5 E F3(Object)2.5 E F0(rule for that.)2.5 E -.15(Fo)5 G 2.5(re).15
G(xample:)-2.65 E F1(LibraryFromObjects libfoo.a : max.o min.o ;)144
398.4 Q(Object max.o : maxmin.c ;)144 410.4 Q(Object min.o : maxmin.c ;)
144 422.4 Q(ObjectCcFlags max.o : -DUSEMAX ;)144 434.4 Q
(ObjectCcFlags min.o : -DUSEMIN ;)144 446.4 Q F0 1.371
(This compiles the same source \214le into tw)108 463.2 R 3.871(od)-.1 G
(if)-3.871 E 1.371(ferent objects, with dif)-.25 F 1.37
(ferent compile \215ags, and archi)-.25 F -.15(ve)-.25 G(s).15 E 2.5
(them. The)108 475.2 R F3(ObjectCcFla)2.5 E(gs)-.1 E F0
(rule is described shortly)2.5 E(.)-.65 E F2(MainFr)87 492 Q
(omObjects Rule)-.18 E F0 .495(Similar to)108 504 R F3(Libr)2.995 E
(aryF)-.15 E -.45(ro)-.55 G(mObjects).45 E F0(,)A F3(MainF)2.995 E -.45
(ro)-.55 G(mObjects).45 E F0 .495(does the linking part of the)2.995 F
F3(Main)2.995 E F0 .496(rule, b)2.996 F .496(ut not the com-)-.2 F 2.5
(piling. F)108 516 R(or e)-.15 E(xample:)-.15 E F1
(MainFromObjects w : w.o ;)144 532.8 Q
(MainFromObjects uptime : uptime.o ;)144 544.8 Q
(Object w.o : uptime.c ;)144 556.8 Q(Object uptime.o : uptime.c ;)144
568.8 Q(ObjectCcFlags w.c : -DW_CODE ;)144 580.8 Q F0 .722
(This compiles tw)108 597.6 R 3.222(od)-.1 G(if)-3.222 E .722
(ferent programs, w and uptime, from the same source \214le with dif)
-.25 F .721(ferent C compiler)-.25 F 3.047(\215ags. Another)108 609.6 R
.547(use of)3.047 F F3(MainF)3.047 E -.45(ro)-.55 G(mObjects).45 E F0
.548(is when there are no objects at all, and e)3.048 F -.15(ve)-.25 G
.548(rything is to be loaded).15 F(from libraries.)108 621.6 Q -.15(Fo)5
G 2.5(re).15 G(xample:)-2.65 E F1(MainFromObjects testprog ;)144 638.4 Q
(LinkLibraries testprog : libprog.a ;)144 650.4 Q
(Library libprog.a : main.c util.c ;)144 662.4 Q F0
(This generates a link command that looks lik)108 674.4 Q 2.5(et)-.1 G
(his:)-2.5 E F1(cc -o testprog libprog.a)144 691.2 Q F0 .323
(Linking purely from libraries is something that doesn')108 708 R 2.823
(tw)-.18 G .323(ork e)-2.923 F -.15(ve)-.25 G .322
(rywhere: it depends on the symbol "main").15 F
(being unde\214ned when the link)108 720 Q
(er encounters the library that contains the de\214nition of "main".)-.1
E(10 March 1995)275.45 768 Q(4)198.45 E EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E/F1 10/Times-Bold@0 SF -.92(Va)87 84 S(riables).92 E
F0(The follo)108 96 Q(wing v)-.25 E
(ariables control the compiling of source \214les.)-.25 E/F2 10
/Courier@0 SF 78($\(C++\) The)144 112.8 R(C++ Compiler \(gcc\))6 E 36
($\(C++FLAGS\) *)144 124.8 R(C++ compiler flags\(\))6 E 84($\(CC\) The)
144 136.8 R 6(CC)6 G(ompiler \(cc\))-6 E 42($\(CCFLAGS\) *)144 148.8 R 6
(Cc)6 G(ompiler flags\(\))-6 E 60($\(HDRS\) *)144 160.8 R
(non-standard header directories \(\))6 E 78($\(LEX\) The)144 172.8 R
(Lex program \(lex\))6 E 66($\(OPTIM\) optimization)144 184.8 R
(flag, if desired \(-O\))6 E 42($\(STDHDRS\) *)144 196.8 R
(standard header directories \(/usr/include\))6 E
($\(SUBDIRC++FLAGS\) * Per-directory C++FLAGS)144 208.8 Q 6
($\(SUBDIRCCFLAGS\) *)144 220.8 R(Per-directory CCFLAGS)6 E 24
($\(SUBDIRHDRS\) *)144 232.8 R(Per-directory HDRS)6 E 72($\(YACC\) The)
144 244.8 R(Yacc program \(yacc -d\))6 E F0(The)108 261.6 Q/F3 10
/Times-Italic@0 SF(Cc)3.845 E F0 1.345(rule sets a tar)3.845 F 1.346
(get-speci\214c $\(CCFLA)-.18 F 1.346(GS\) to the current v)-.4 F 1.346
(alue of $\(CCFLA)-.25 F 1.346(GS\) and $\(SUBDIRC-)-.4 F(CFLA)108 273.6
Q 2.636(GS\). Similarly)-.4 F .136(for the)2.636 F F3(C++)2.636 E F0
2.636(rule. The)2.636 F F3(Object)2.636 E F0 .136(rule sets a tar)2.636
F .135(get-speci\214c $\(HDRS\) to the current v)-.18 F(alue)-.25 E
(of $\(HDRS\) and $\(SUBDDIRHDRS\).)108 285.6 Q .382
($\(CC\), $\(C++\), $\(CCFLA)108 302.4 R .382(GS\), $\(C++FLA)-.4 F .382
(GS\), $\(OPTIM\), and $\(HDRS\) all af)-.4 F .383
(fect the compiling of C and)-.25 F(C++ \214les.)108 314.4 Q
($\(OPTIM\) is separate from $\(CCFLA)5 E(GS\) and $\(C++FLA)-.4 E
(GS\) so the)-.4 E 2.5(yc)-.15 G(an be set independently)-2.5 E(.)-.65 E
.127($\(HDRS\) lists the directories to search for header \214les, and \
it is used in tw)108 331.2 R 2.627(ow)-.1 G .126
(ays: \214rst, it is passed to the C)-2.727 F .253
(compiler \(with the \215ag)108 343.2 R F1(-I)2.754 E F0 .254
(prepended\); second, it is used by)2.754 F F3(HdrRule)2.754 E F0 .254
(to locate the header \214les whose names)2.754 F 1.815
(were found when scanning source \214les.)108 355.2 R 1.814
($\(STDHDRS\) lists the header directories that the C compiler)6.814 F
(already kno)108 367.2 Q(ws about.)-.25 E
(It does not need passing to the C compiler)5 E 2.5(,b)-.4 G
(ut is used by)-2.7 E F3(HdrRule)2.5 E F0(.)A 1.088(Note that these v)
108 384 R 1.089(ariables, if set as tar)-.25 F 1.089(get-speci\214c v)
-.18 F 1.089(ariables, must be set on the tar)-.25 F 1.089
(get, not the source \214le.)-.18 F(The tar)108 396 Q
(get \214le in this case is the object \214le to be generated.)-.18 E
-.15(Fo)5 G 2.5(re).15 G(xample:)-2.65 E F2
(Library libximage.a : xtiff.c xjpeg.c xgif.c ;)144 412.8 Q
(HDRS on xjpeg.o = /usr/local/src/jpeg ;)144 436.8 Q
(CCFLAGS on xtiff.o = -DHAVE_TIFF ;)144 448.8 Q F0
(This can be done more easily with the rules that follo)108 465.6 Q -.65
(w.)-.25 G F1(ObjectCcFlags, ObjectC++Flags, ObjectHdrs Rules)87 482.4 Q
F0($\(CCFLA)108 494.4 Q 1.595(GS\), $\(C++FLA)-.4 F 1.595
(GS\) and $\(HDRS\) can be manipulated directly)-.4 F 4.095(,b)-.65 G
1.594(ut there are rules that allo)-4.295 F(w)-.25 E .699(these v)108
506.4 R .699(ariables to be set by referring to the original source \
\214le name, rather than to the deri)-.25 F -.15(ve)-.25 G 3.2(do).15 G
.7(bject \214le)-3.2 F(name.)108 518.4 Q F3(ObjectCcFla)7.578 E(gs)-.1 E
F0 2.578(adds object-speci\214c \215ags to the $\(CCFLA)5.078 F 2.578
(GS\) v)-.4 F(ariable,)-.25 E F3(ObjectC++Fla)5.078 E(gs)-.1 E F0(adds)
5.078 E 1.123(object-speci\214c \215ags to the $\(C++FLA)108 530.4 R
1.123(GS\) v)-.4 F 1.123(ariable, and)-.25 F F3(ObjectHdr)3.623 E(s)-.1
E F0 1.124(add object-speci\214c directories to the)3.623 F($\(HDRS\) v)
108 542.4 Q 2.5(ariable. F)-.25 F(or e)-.15 E(xample:)-.15 E F2
(Main xviewer : viewer.c ;)144 559.2 Q
(ObjectCcFlags viewer.c : -DXVERSION ;)144 571.2 Q
(ObjectHdrs viewer.c : /usr/include/X11 ;)144 583.2 Q F0(Actually)108
600 Q 2.5(,t)-.65 G(he \214le suf)-2.5 E(\214x \()-.25 E F1(.c)A F0
(in this case\) is ignored: the rules kno)2.5 E 2.5(wt)-.25 G 2.5(or)
-2.5 G(efer to the object.)-2.5 E F1
(SubDirCcFlags, SubDirC++Flags, SubDirHdrs Rules)87 616.8 Q F0 2.699
(These rules set the v)108 628.8 R 2.699(alues of $\(SUBDIRCCFLA)-.25 F
2.699(GS\), $\(SUBDIRC++FLA)-.4 F 2.699(GS\) and $\(SUBDIRHDRS\),)-.4 F
.326(which are used by the)108 640.8 R F3(Cc)2.827 E F0(,)A F3(C++)2.827
E F0 2.827(,a)C(nd)-2.827 E F3(Object)2.827 E F0 .327
(rules when setting the tar)2.827 F .327(get-speci\214c v)-.18 F .327
(alues for $\(CCFLA)-.25 F(GS\),)-.4 E($\(C++FLA)108 652.8 Q .383
(GS\) and $\(HDRS\).)-.4 F(The)5.382 E F3(SubDir)2.882 E F0 .382
(rule clears these v)2.882 F .382(ariables out, and thus the)-.25 F
2.882(yp)-.15 G(ro)-2.882 E .382(vide directory-)-.15 F(speci\214c v)108
664.8 Q(alues of $\(CCFLA)-.25 E(GS\), $\(C++FLA)-.4 E 2.5(GS\) and)-.4
F 2.5($\(HDRS\). F)2.5 F(or e)-.15 E(xample:)-.15 E F2
(SubDir TOP src util ;)144 681.6 Q(SubDirHdrs $\(TOP\)/src/hdr ;)144
705.6 Q(SubDirCcFlags -DUSE_FAST_CODE ;)144 717.6 Q F0(10 March 1995)
275.45 768 Q(5)198.45 E EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E/F1 9/Times-Bold@0 SF(HEADER FILE PR)72 84 Q(OCESSING)
-.27 E F0 .321(One of the functions of the)108 96 R/F2 10/Times-Italic@0
SF(Object)2.821 E F0 .322(rule is to scan source \214les for \(C style\
\) header \214le inclusions.)2.821 F 1.922 -.8(To d)5.322 H 2.822(os).8
G(o,)-2.822 E .01(it sets the)108 108 R/F3 10/Times-Bold@0 SF(jam)2.51 E
F0 .009(-special v)B .009(ariables $\(HDRSCAN\) and $\(HDRR)-.25 F .009
(ULE\) as tar)-.4 F .009(get-speci\214c v)-.18 F .009
(ariables for the source)-.25 F 2.816(\214le. The)108 120 R .316
(presence of these v)2.816 F .316
(ariables triggers a special mechanism in)-.25 F F3(jam)2.816 E F0 .316
(for scanning a \214le for header \214le)2.816 F .018(inclusions and in)
108 132 R -.2(vo)-.4 G .017(king a rule with the results of the scan.).2
F .017(The $\(HDRSCAN\) v)5.017 F .017(ariable is set to an)-.25 F F3
(egr)2.517 E(ep)-.18 E F0(\(1\))A 1.065(pattern that matches "#include"\
 statements in C source \214les, and the $\(HDRR)108 144 R 1.065
(ULE\) v)-.4 F 1.065(ariable is set to the)-.25 F
(name of the rule that gets in)108 156 Q -.2(vo)-.4 G -.1(ke).2 G 2.5
(da).1 G 2.5(ss)-2.5 G(uch:)-2.5 E/F4 10/Courier@0 SF
($\(HDRRULE\) source-file : included-files ;)144 172.8 Q F0 .3(This rul\
e is supposed to set up the dependencies between the source \214le and \
the included \214les.)108 189.6 R(The)5.3 E F2(Object)2.8 E F0 .184
(rule uses)108 201.6 R F2(HdrRule)2.684 E F0 .184(to do the job)2.684 F
(.)-.4 E F2(HdrRule)5.184 E F0 .184(itself e)2.684 F .184
(xpects another v)-.15 F .184(ariable, $\(HDRSEARCH\), to be set to the)
-.25 F .215
(list of directories where the included \214les can be found.)108 213.6
R F2(Object)5.215 E F0 .215(does this as well, setting $\(HDRSEARCH\))
2.715 F(to $\(HDRS\) and $\(STDHDRS\).)108 225.6 Q .1
(The header \214le scanning occurs during the "\214le binding" phase of)
108 242.4 R F3(jam)2.6 E F0 2.6(,w)C .1(hich means that the tar)-2.6 F
(get-speci\214c)-.18 E -.25(va)108 254.4 S .42
(riables \(for the source \214le\) are in ef).25 F 2.92(fect. T)-.25 F
2.92(oa)-.8 G .42(ccomodate nested includes, one of the)-2.92 F F2
(HdrRule)2.92 E F0 1.52 -.55('s j)D .42(obs is to).55 F .994
(pass the tar)108 266.4 R .994(get-speci\214c v)-.18 F .994
(alues of $\(HDRR)-.25 F .995
(ULE\), $\(HDRSCAN\), and $\(HDRSEARCH\) onto the included)-.4 F
(\214les, so that the)108 278.4 Q 2.5(yw)-.15 G(ill be scanned as well.)
-2.5 E F3(HdrRule Rule)87 295.2 Q F2(HdrRule)108 307.2 Q F0 .923
(can be in)3.423 F -.2(vo)-.4 G -.1(ke).2 G 3.423(dd).1 G(irectly)-3.423
E 3.423(,b)-.65 G .922
(ut it is most usable as the boilerplate in a user)-3.623 F .922
(-de\214ned $\(HDRR)-.2 F(ULE\).)-.4 E -.15(Fo)108 319.2 S 2.5(re).15 G
(xample:)-2.65 E F4(Main mkhdr : mkhdr.c ;)144 336 Q
(Main ugly : ugly.c ;)144 348 Q(HDRRULE on ugly.c = BuiltHeaders ;)144
372 Q(rule BuiltHeaders)144 396 Q({)144 408 Q(DEPENDS $\(>\) : mkhdr ;)
192 420 Q(HdrRule $\(<\) : $\(>\) ;)192 432 Q(})144 444 Q F0 .205
(This e)108 460.8 R .205
(xample just says that the \214les included by "ugly)-.15 F .206
(.c" are generated by the program "mkhdr", which can)-.65 F .305(be b)
108 472.8 R .305(uilt from "mkhdr)-.2 F 2.804(.c". By)-.55 F(calling)
2.804 E F2(HdrRule)2.804 E F0 .304(at the end of)2.804 F F2(BuiltHeader)
2.804 E(s)-.1 E F0 2.804(,a)C .304(ll the g)-2.804 F .304(adgetry of)
-.05 F F2(HdrRule)2.804 E F0(tak)2.804 E(es)-.1 E(ef)108 484.8 Q
(fect and it doesn')-.25 E 2.5(tn)-.18 G(eed to be duplicated.)-2.5 E F3
-.92(Va)87 501.6 S(riables).92 E F0(The complete list of v)108 513.6 Q
(ariables used by the)-.25 E F2(HdrRule)2.5 E F0(coterie are:)2.5 E F4
18($\(HDRPATTERN\) *)144 530.4 R
(scan pattern for $\(HDRSCAN\) \(ugly egrep expression\))6 E 48
($\(HDRRULE\) scan)144 542.4 R
(rule, when set activates scanning \(HdrRule\))6 E 54($\(HDRS\) *)144
554.4 R(non-standard directories for headers \(\))6 E 48
($\(HDRSCAN\) scan)144 566.4 R
(pattern when actually scanning \($\(HDRPATTERN\)\))6 E 36
($\(HDRSEARCH\) search)144 578.4 R
(list for HdrRule \($\(HDRS\) $\(STDHDRS\)\))6 E 36($\(STDHDRS\) *)144
590.4 R(standard directories for headers \(/usr/include\))6 E F0(The)108
607.2 Q F2(Object)2.845 E F0 .345(rule sets HDRR)2.845 F .346(ULE and H\
DRSCAN speci\214cally for the source \214les to be scanned, rather than)
-.4 F(globally)108 619.2 Q 5.655(.I)-.65 G 3.155(ft)-5.655 G(he)-3.155 E
3.154(yw)-.15 G .654(ere set globally)-3.154 F(,)-.65 E F3(jam)3.154 E
F0 -.1(wo)3.154 G .654(uld attempt to scan all \214les, e).1 F -.15(ve)
-.25 G 3.154(nl).15 G .654(ibrary archi)-3.154 F -.15(ve)-.25 G 3.154
(sa).15 G .654(nd e)-3.154 F -.15(xe)-.15 G(cuta-).15 E
(bles, for header \214le inclusions.)108 631.2 Q(That w)5 E(ould be slo)
-.1 E 2.5(wa)-.25 G(nd probably not yield desirable results.)-2.5 E F1
(COPYING FILES)72 648 Q F3(File Rule)87 660 Q F0(The)108 672 Q F2 -.45
(Fi)2.87 G(le).45 E F0 .37(rule copies one \214le to another)2.87 F 5.37
(.T)-.55 G .37(he tar)-5.37 F .37(get name needn')-.18 F 2.87(tb)-.18 G
.37(ear an)-2.87 F 2.87(yr)-.15 G .37(elationship to the source name.)
-2.87 F -.15(Fo)108 684 S 2.5(re).15 G(xample:)-2.65 E F4
(File $\(DESTDIR\)/foo : bar ;)144 700.8 Q F0(10 March 1995)275.45 768 Q
(6)198.45 E EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E/F1 10/Times-Bold@0 SF(Bulk Rule)87 84 Q F0(The)108 96
Q/F2 10/Times-Italic@0 SF(Bulk)2.564 E F0 .064
(rule is a shorthand for man)2.564 F 2.563(yi)-.15 G -1.9 -.4(nv o)
-2.563 H .063(cations of the).4 F F2 -.45(Fi)2.563 G(le).45 E F0 .063
(rule when all \214les are going to the same direc-)2.563 F(tory)108 108
Q 5(.F)-.65 G(or e)-5.15 E(xample:)-.15 E/F3 10/Courier@0 SF
(Bulk /usr/local/lib/grob : grobvals.txt grobvars.txt ;)144 124.8 Q F1
(HardLink Rule)87 141.6 Q F0(The)108 153.6 Q F2(Har)3.082 E(dLink)-.37 E
F0 .582(rule mak)3.082 F .582(es a hard link \(using)-.1 F F1(ln)3.082 E
F0 .582(\(1\)\) from the source to the tar)B .582(get, if there isn')
-.18 F 3.083(to)-.18 G .583(ne already)-3.083 F(.)-.65 E -.15(Fo)108
165.6 S 2.5(re).15 G(xample:)-2.65 E F3
(HardLink config.h : config.h.dist ;)144 182.4 Q F1(Shell Rule)87 199.2
Q F0(The)108 211.2 Q F2(Shell)2.684 E F0 .184(rule is lik)2.684 F 2.683
(et)-.1 G(he)-2.683 E F2 -.45(Fi)2.683 G(le).45 E F0 .183(rule, e)2.683
F .183(xcept that it mak)-.15 F .183
(es sure the \214rst line of the tar)-.1 F .183
(get is "#!/bin/sh" and sets)-.18 F(the permission to mak)108 223.2 Q
2.5(et)-.1 G(he \214le e)-2.5 E -.15(xe)-.15 G 2.5(cutable. F).15 F
(or e)-.15 E(xample:)-.15 E F3(Shell /usr/local/bin/add : add.sh ;)144
240 Q F1 -.92(Va)87 256.8 S(riables).92 E F0(The follo)108 268.8 Q
(wing v)-.25 E(ariables are used when cop)-.25 E(ying \214les:)-.1 E F3
30($\(FILEMODE\) *)144 285.6 R(default value for MODE for files \(644\))
6 E 24($\(SHELLHEADER\) first)144 297.6 R
(line of shell scripts \(#!/bin/sh\))6 E 24($\(SHELLMODE\) *)144 309.6 R
(default value for MODE for shell scripts \(755\))6 E 66
($\(MODE\) permission)144 321.6 R(on target)6 E F2 -.45(Fi)108 338.4 S
(le).45 E F0 1.263(and Shell sets a tar)3.762 F 1.263
(get-speci\214c MODE to the current v)-.18 F 1.263
(alue of $\(FILEMODE\) or $\(SHELLMODE\),)-.25 F(respecti)108 350.4 Q
-.15(ve)-.25 G(ly).15 E 5(.F)-.65 G(or e)-5.15 E(xample:)-.15 E F3
(Shell /usr/local/bin/add : add.awk ;)144 367.2 Q
(SHELLHEADER on /usr/local/bin/add = "#!/bin/awk -f" ;)144 379.2 Q F0
(This installs an)108 396 Q F1(awk)2.5 E F0(\(1\) script.)A/F4 9
/Times-Bold@0 SF(INST)72 412.8 Q(ALLING FILES)-.81 E F1(InstallBin Rule)
87 424.8 Q F2(InstallBin)108 436.8 Q F0(calls)2.582 E F1(install)2.582 E
F0 .082(\(1\) to install e)B -.15(xe)-.15 G .081(cutables in the tar).15
F .081(get directory)-.18 F 5.081(.$)-.65 G .081
(\(BINDIR\) is set to /usr/local/bin for)-5.081 F(con)108 448.8 Q -.15
(ve)-.4 G 2.5(nience. F).15 F(or e)-.15 E(xample:)-.15 E F3
(Main add : add.c ;)144 465.6 Q(Main sub : sub.c ;)144 477.6 Q
(InstallBin $\(BINDIR\) : add sub ;)144 489.6 Q F1(InstallLib Rule)87
506.4 Q F2(InstallLib)108 518.4 Q F0(calls)3.406 E F1(install)3.406 E F0
.907(\(1\) to install \214les in the tar)B .907(get directory)-.18 F
5.907(.$)-.65 G .907(\(LIBDIR\) is set to /usr/local/lib for con-)-5.907
F -.15(ve)108 530.4 S 2.5(nience. F).15 F(or e)-.15 E(xample:)-.15 E F3
(InstallLib $\(LIBDIR\) : bighelp.txt ;)144 547.2 Q F1(InstallMan Rule)
87 564 Q F2(InstallMan)108 576 Q F0(calls)3.203 E F1(install)3.203 E F0
.702(\(1\) to install manual pages in the appropriate subdirectories of\
 the tar)B .702(get directory)-.18 F(.)-.65 E
($\(MANDIR\) is set to /usr/local/man for con)108 588 Q -.15(ve)-.4 G
2.5(nience. F).15 F(or e)-.15 E(xample:)-.15 E F3
(InstallMan $\(MANDIR\) : add.1 sub.1 bigfile.8 ;)144 604.8 Q F1
(InstallShell Rule)87 621.6 Q F2(InstallShell)108 633.6 Q F0(calls)2.5 E
F1(install)2.5 E F0(\(1\) to install shell scripts in the tar)A
(get directory)-.18 E 5(.F)-.65 G(or e)-5.15 E(xample:)-.15 E F3
(Shell bugs : bugs.sh ;)144 650.4 Q(InstallShell $\(BINDIR\) : bugs ;)
144 662.4 Q F0 .164(The dif)108 679.2 R .164(ference between)-.25 F F2
(Shell)2.664 E F0(and)2.664 E F2(InstallShell)2.664 E F0 .164
(is not much: the)2.664 F 2.664(yb)-.15 G .165(oth cop)-2.664 F 2.665
(yt)-.1 G .165(he source to the tar)-2.665 F 2.665(get. The)-.18 F(for)
2.665 E(-)-.2 E 1.175(mer also mak)108 691.2 R 1.174
(es sure the script be)-.1 F 1.174
(gins with the magic string "#!/bin/sh"; the latter uses)-.15 F F1
(install)3.674 E F0 1.174(\(1\) for the)B(cop)108 703.2 Q -.65(y.)-.1 G
(10 March 1995)275.45 768 Q(7)198.45 E EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E/F1 10/Times-Bold@0 SF(MkDir Rule)87 84 Q F0 1.39
(All the)108 96 R/F2 10/Times-Italic@0 SF(Install)3.89 E F0 1.39
(rules in)3.89 F -.2(vo)-.4 G 1.59 -.1(ke t).2 H(he).1 E F2(MkDir)3.89 E
F0 1.391(rule to create the directory for the tar)3.89 F 1.391
(get \214le.)-.18 F F2(MkDir)6.391 E F0(recursi)3.891 E -.15(ve)-.25 G
(ly).15 E(in)108 108 Q -.2(vo)-.4 G -.1(ke).2 G 3.502(si).1 G 1.002
(tself on its parent directory)-3.502 F 3.502(,t)-.65 G 3.502(om)-3.502
G(ak)-3.502 E 3.502(es)-.1 G 1.002(ure the whole path gets created.)
-3.502 F F2(MkDir)6.002 E F0 1.001(marks directories)3.501 F .928
(with the b)108 120 R .929(uilt-in rule)-.2 F F2(NOUPD)3.429 E -.37(AT)
-.35 G(E).37 E F0 3.429(,w)C .929(hich tells)-3.429 F F1(jam)3.429 E F0
.929(not to update a tar)3.429 F .929(get once it e)-.18 F 3.429
(xists. In)-.15 F .929(that w)3.429 F(ay)-.1 E 3.429(,t)-.65 G(he)-3.429
E .016(contents of the install directory can depend on the e)108 132 R
.015(xistence of the install directory itself, and thus the direc-)-.15
F(tory will be made before its contents are installed.)108 144 Q -1.1
(Yo)5 G 2.5(uc)1.1 G(an call)-2.5 E F2(MkDir)2.5 E F0(directly)2.5 E 5
(.F)-.65 G(or e)-5.15 E(xample:)-.15 E/F3 10/Courier@0 SF
(File /usr/local/bin/junky : junky ;)144 160.8 Q
(DEPENDS /usr/local/bin/junky : /usr/local/bin ;)144 172.8 Q
(MkDir /usr/local/bin ;)144 184.8 Q F0 .536(This says that /usr/local/b\
in must be created before /usr/local/bin/junk)108 201.6 R 3.037(yc)-.15
G .537(an be b)-3.037 F 3.037(uilt. Needless)-.2 F .537(to say)3.037 F
(,)-.65 E F1(jam)3.037 E F0(can')108 213.6 Q 2.5(td)-.18 G 2.5(om)-2.5 G
(uch if you don')-2.5 E 2.5(th)-.18 G -2.25 -.2(av e)-2.5 H
(permissions to create directories along the path.)2.7 E F1 -.92(Va)87
230.4 S(riables).92 E F0(The follo)108 242.4 Q(wing v)-.25 E
(ariables control the installation rules:)-.25 E F3 54
($\(BINDIR\) InstallBin)144 259.2 R(directory \(/usr/local/bin\))6 E 54
($\(LIBDIR\) InstallLib)144 271.2 R(directory \(/usr/local/lib\))6 E 54
($\(MANDIR\) InstallMan)144 283.2 R(directory \(/usr/local/man\))6 E 48
($\(INSTALL\) The)144 295.2 R
(install program; uses cp if not set \(install\))6 E 30($\(FILEMODE\) *)
144 307.2 R(default MODE for InstallLib, InstallMan \(644\))6 E 36
($\(EXEMODE\) *)144 319.2 R(default MODE for InstallBin \(711\))6 E 24
($\(SHELLMODE\) *)144 331.2 R(default MODE for InstallShell \(755\))6 E
66($\(MODE\) permission)144 343.2 R(on target)6 E 60($\(MKDIR\) Program)
144 355.2 R(for creating a directory \(mkdir\))6 E F0(The)108 372 Q F2
(Install)3.99 E F0 1.49(rules set a tar)3.99 F 1.489
(get-speci\214c MODE to the current v)-.18 F 1.489
(alue of $\(FILEMODE\), $\(EXEMODE\), or)-.25 F
($\(SHELLMODE\), depending on which)108 384 Q F2(Install)2.5 E F0
(rule w)2.5 E(as in)-.1 E -.2(vo)-.4 G -.1(ke).2 G(d.).1 E .042
(The directory v)108 400.8 R .043(ariables are just de\214ned for con)
-.25 F -.15(ve)-.4 G .043(nience: the).15 F 2.543(ym)-.15 G .043
(ust be passed as the tar)-2.543 F .043(get to the appropriate)-.18 F F2
(Install)108 412.8 Q F0 3.015(rule. The)3.015 F($\(INST)3.015 E .515
(ALL\) and mode v)-.93 F .515
(ariables must be set \(globally\) before calling the)-.25 F F2(Install)
3.015 E F0 .515(rules in)3.015 F(order to tak)108 424.8 Q 2.5(ee)-.1 G
-.25(ff)-2.5 G(ect.).25 E/F4 9/Times-Bold@0 SF(HANDLING DIRECT)72 441.6
Q(OR)-.162 E 2.25(YT)-.315 G(REES)-2.25 E F1 -.15(Ja)108 453.6 S(m).15 E
F0 .665(can b)3.165 F .665(uild lar)-.2 F .665
(ge projects spread across man)-.18 F 3.165(yd)-.15 G .666
(irectories in one pass, tracking the relationships among)-3.165 F .192
(all \214les.)108 465.6 R .192(It doesn')5.192 F 2.692(tr)-.18 G .192
(equire the user to change the in)-2.692 F -.2(vo)-.4 G .191
(cations of normal rules lik).2 F(e)-.1 E F2(Main)2.691 E F0(,)A F2
(Libr)2.691 E(ary)-.15 E F0 2.691(,e)C .191(tc. to use)-2.691 F 1.37
(non-local pathnames:)108 477.6 R 1.371
(these rules continue to refer to \214les in the directory of the)6.37 F
F1 -.15(Ja)3.871 G(m\214le).15 E F0 6.371(.T)C 1.371(his section)-6.371
F(describes the rules and v)108 489.6 Q(ariables which support this.)
-.25 E 1.6 -.8(To b)108 506.4 T
(uild a whole directory tree at a time, the user must do three things:)
.6 E 26(1. Set)108 523.2 R .78(an en)3.28 F .78(vironment v)-.4 F .779
(ariable pointing to the root directory of the source tree.)-.25 F .779
(The root v)5.779 F(ariable')-.25 E(s)-.55 E
(name is left up to the user)144 535.2 Q 2.5(,b)-.4 G(ut in these e)-2.7
E(xamples we use T)-.15 E(OP)-.18 E(.)-1.11 E 26(2. Place)108 552 R .034
(at the root of the tree a \214le named)2.534 F F1 -.15(Ja)2.534 G
(mrules).15 E F0 5.034(.\()C .034
(This \214le can alternately be named by the v)-5.034 F(ari-)-.25 E .592
(able $\(xxxR)144 564 R .591
(ULES\), where xxx is the name of the root v)-.4 F 3.091
(ariable\). This)-.25 F .591(\214le could be empty)3.091 F 3.091(,b)-.65
G .591(ut in)-3.291 F .214(practice it contains user)144 576 R(-pro)-.2
E .214(vided rules and v)-.15 F .215
(ariable de\214nitions that are shared throughout the tree.)-.25 F 1.562
(Examples of such de\214nitions are library names, header directories, \
install directories, compiler)144 588 R(\215ags, etc.)144 600 Q
(This \214le is good candidate for automatic customizing with)5 E F1
(autoconf)2.5 E F0(\(GNU\).)A 26(3. Pref)108 616.8 R(ace the)-.1 E F1
-.15(Ja)2.5 G(m\214le).15 E F0(in each directory with an in)2.5 E -.2
(vo)-.4 G(cation of the).2 E F2(SubDir)2.5 E F0(rule.)2.5 E F1
(SubDir Rule)87 633.6 Q F0(The)108 645.6 Q F2(SubDir)2.5 E F0
(rule does tw)2.5 E 2.5(ot)-.1 G(hings:)-2.5 E 26(1. It)108 662.4 R .158
(reads in the)2.658 F F1 -.15(Ja)2.658 G(mrules).15 E F0 .159
(at the root of the tree, if that \214le hasn')2.658 F 2.659(ta)-.18 G
.159(lready been read in by a pre)-2.659 F(vious)-.25 E(in)144 674.4 Q
-.2(vo)-.4 G(cation of).2 E F2(SubDir)2.5 E F0(.)A 26(2. It)108 691.2 R
1.505(sets a fe)4.005 F 4.005(wv)-.25 G 1.505(ariables that tell)-4.255
F F1(jam)4.005 E F0 1.504(the name of the)4.005 F F1 -.15(Ja)4.004 G
(m\214le).15 E F0 2.604 -.55('s d)D(irectory).55 E 4.004(,s)-.65 G 4.004
(ot)-4.004 G(hat)-4.004 E F1(jam)4.004 E F0 1.504(may \214nd)4.004 F
(source \214les that are named local to the)144 703.2 Q F1 -.15(Ja)2.5 G
(m\214le).15 E F0 1.1 -.55('s d)D(irectory).55 E(.)-.65 E(The)108 720 Q
F2(SubDir)2.979 E F0 .479(rule tak)2.979 F .479(es as its \214rst ar)-.1
F .479(gument the root v)-.18 F(ariable')-.25 E 2.98(sn)-.55 G .48
(ame and tak)-2.98 F .48(es as subsequent ar)-.1 F .48(guments the)-.18
F(10 March 1995)275.45 768 Q(8)198.45 E EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E 1.019
(directory names leading from the root to the directory of the current)
108 84 R/F1 10/Times-Bold@0 SF -.15(Ja)3.519 G(m\214le).15 E F0 6.019
(.N)C 1.019(ote that the name of the)-6.019 F .609(subdirectory is gi)
108 96 R -.15(ve)-.25 G 3.109(na).15 G 3.109(si)-3.109 G(ndi)-3.109 E
.609(vidual elements:)-.25 F(the)5.609 E/F2 10/Times-Italic@0 SF(SubDir)
3.109 E F0 .61(rule does not use system-speci\214c directory name)3.109
F(syntax.)108 108 Q(The)108 124.8 Q F2(SubDir)2.557 E F0 .057
(rule must be in)2.557 F -.2(vo)-.4 G -.1(ke).2 G 2.557(db).1 G .057
(efore an)-2.557 F 2.557(yr)-.15 G .057
(ules that refer to the contents of the directory - it is best to put)
-2.557 F(it at the top of each)108 136.8 Q F1 -.15(Ja)2.5 G(m\214le).15
E F0 5(.F)C(or e)-5.15 E(xample:)-.15 E/F3 10/Courier@0 SF 6(#M)144
153.6 S(ondo src/util directory.)-6 E(SubDir TOP src util ;)144 177.6 Q
(Main $\(TOP\)/bin/testutil : test.c ;)144 201.6 Q
(LinkLibraries $\(TOP\)/bin/testutil : $\(TOP\)/lib/libutil.a ;)144
225.6 Q(Library $\(TOP\)/lib/libutil.a : gadgets.c gizmos.c widgets.c ;)
144 249.6 Q F0 .783(This compiles four \214les in $\(T)108 266.4 R .783
(OP\)/src/util, archi)-.18 F -.15(ve)-.25 G 3.283(st).15 G .783
(hree of the objects into lib)-3.283 F .783(util.a, and links the whole)
-.2 F(thing into $\(T)108 278.4 Q(OP\)/bin/testutil.)-.18 E F1
(SubInclude Rule)87 295.2 Q F0(The)108 307.2 Q F2(SubInclude)3.191 E F0
.691(rule sources the)3.191 F F1 -.15(Ja)3.191 G(m\214le).15 E F0 .691
(from the named subdirectory)3.191 F 5.691(.I)-.65 G .69(ts ar)-5.691 F
.69(guments are in the same for)-.18 F(-)-.2 E .546(mat as)108 319.2 R
F2(SubDir)3.046 E F0 -.55('s)C 3.046(,a).55 G .546
(nd its only reason for being is to allo)-3.046 F 3.047(wi)-.25 G .547
(ncluding a subdirectory)-3.047 F F1 -.15(Ja)3.047 G(m\214le).15 E F0
.547(without ha)3.047 F(ving)-.2 E
(to use system-speci\214c directory name syntax.)108 331.2 Q .902
(The recommended practice is only to include one le)108 348 R -.15(ve)
-.25 G 3.402(lo).15 G 3.402(fs)-3.402 G .901
(ubdirectories at a time, and let the)-3.402 F F1 -.15(Ja)3.401 G
(m\214le).15 E F0(in)3.401 E .535(each subdirectory include its o)108
360 R .536(wn subdirectories.)-.25 F .536(This allo)5.536 F .536
(ws a user to sit in an)-.25 F 3.036(ya)-.15 G .536
(rbitrary directory of the)-3.036 F(source tree and b)108 372 Q
(uild that subtree.)-.2 E -.15(Fo)5 G 2.5(re).15 G(xample:)-2.65 E F3 6
(#T)144 388.8 S(op level Jamfile for mondo project.)-6 E(#)144 400.8 Q 6
(#$)144 412.8 S
(\(TOP\) points to root of mondo tree \(set in environment\).)-6 E
(SubInclude TOP src ;)144 436.8 Q(SubInclude TOP man ;)144 448.8 Q
(SubInclude TOP misc ;)144 460.8 Q(SubInclude TOP util ;)144 472.8 Q F0
.556(If a directory has both subdirectories of its o)108 489.6 R .555
(wn as well as \214les that need b)-.25 F .555(uilding, the)-.2 F F2
(SubIncludes)3.055 E F0(should)3.055 E .992(be either before the)108
501.6 R F2(SubDir)3.493 E F0 .993(rule or be at the end of the)3.493 F
F1 -.15(Ja)3.493 G(m\214le).15 E F0(-)3.493 E F2(not)3.493 E F0 .993
(between the)3.493 F F2(SubDir)3.493 E F0 .993(and other rule)3.493 F
(in)108 513.6 Q -.2(vo)-.4 G 2.5(cations. F).2 F(or e)-.15 E(xample:)
-.15 E F3 6(#M)144 530.4 S(ondo src code.)-6 E(SubDir TOP src ;)144
554.4 Q(Main mondo : mondo.c ;)144 578.4 Q
(LinkLibraries mondo : $\(TOP\)/lib/libmisc.a $\(TOP\)/lib/libutil.a ;)
144 590.4 Q(SubInclude TOP src misc ;)144 614.4 Q
(SubInclude TOP src util ;)144 626.4 Q F1 -.92(Va)87 643.2 S(riables).92
E F0(The follo)108 655.2 Q(wing v)-.25 E(ariables are used when)-.25 E
F1(jam)2.5 E F0(spans multiple directories:)2.5 E F3 12
($\(LOCATE_TARGET\) Directory)144 672 R(to place targets.)6 E 12
($\(SEARCH_SOURCE\) Directory)144 684 R(to find sources.)6 E 18
($\(SOURCE_GRIST\) Something)144 696 R(to perturb source file names.)6 E
F2(SubDir)108 712.8 Q F0 .142(sets $\(LOCA)2.642 F(TE_T)-1.11 E .142
(ARGET\) and $\(SEARCH_SOURCE\) to be the directory gi)-.93 F -.15(ve)
-.25 G 2.641(nt).15 G(o)-2.641 E F2(SubDir)2.641 E F0 5.141(.T)C(hese)
-5.141 E -.25(va)108 724.8 S .05(riables are used e).25 F(xtensi)-.15 E
-.15(ve)-.25 G .05(ly by rules in).15 F F1 -.15(Ja)2.551 G(mbase).15 E
F0 2.551(:m)C .051(ost rules that generate tar)-2.551 F .051(gets \(lik)
-.18 F(e)-.1 E F2(Main)2.551 E F0(,)A F2(Object)2.551 E F0 2.551(,e)C
(tc.\))-2.551 E(10 March 1995)275.45 768 Q(9)198.45 E EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E .26(set $\(LOCA)108 84 R .26(TE\) to be $\(LOCA)-1.11
F(TE_T)-1.11 E .26(ARGET\) for the tar)-.93 F .26(gets the)-.18 F 2.76
(yg)-.15 G .26(enerate, and rules that use sources \(most)-2.76 F(all o\
f them\) set $\(SEARCH\) to be $\(SEARCH_SOURCE\) for the sources the)
108 96 Q 2.5(yu)-.15 G(se.)-2.5 E($\(LOCA)108 112.8 Q .2
(TE\) and $\(SEARCH\) are better e)-1.11 F .2(xplained in)-.15 F/F1 10
/Times-Bold@0 SF(jam)2.7 E F0 .201(\(1\), b)B .201(ut in brief the)-.2 F
2.701(yt)-.15 G(ell)-2.701 E F1(jam)2.701 E F0 .201(where to create ne)
2.701 F(w)-.25 E(tar)108 124.8 Q(gets and where to \214nd e)-.18 E
(xisting ones, respecti)-.15 E -.15(ve)-.25 G(ly).15 E(.)-.65 E/F2 10
/Times-Italic@0 SF(SubDir)108 141.6 Q F0 .913
(sets $\(SOURCE_GRIST\) to be a v)3.413 F .912(alue deri)-.25 F -.15(ve)
-.25 G 3.412(df).15 G .912(rom the directory name.)-3.412 F .912
($\(SOURCE_GRIST\) is)5.912 F .294(used by the rules that tak)108 153.6
R 2.794(es)-.1 G .294(ource \214les to perturb \214le names in dif)
-2.794 F .295(ferent directories that w)-.25 F .295(ould otherwise be)
-.1 F(the same.)108 165.6 Q .327
(It should be noted that the user can set these v)108 182.4 R .327
(ariables independently of)-.25 F F2(SubDir)2.827 E F0 2.827(,o)C 2.827
(ra)-2.827 G .327(fter it.)-2.827 F .326(The most prof-)5.326 F .491
(itable e)108 194.4 R .492(xample is setting $\(LOCA)-.15 F(TE_T)-1.11 E
.492(ARGET\) to be a directory outside the source tree: in this case,)
-.93 F F1(jam)2.992 E F0(can b)108 206.4 Q(uild into a tar)-.2 E
(get directory \(tree\) without e)-.18 E -.15(ve)-.25 G 2.5(rm).15 G
(odifying the source tree.)-2.5 E F1(VMS Notes)87 223.2 Q F0 .814
(On VMS, the logical name table is not imported as is the en)108 235.2 R
.814(vironment on UNIX.)-.4 F 2.413 -.8(To u)5.813 H .813(se the).8 F F2
(SubDir)3.313 E F0(and)3.313 E(related rules, you must set the v)108
247.2 Q(alue of the v)-.25 E(ariable that names the root directory)-.25
E 5(.F)-.65 G(or e)-5.15 E(xample:)-.15 E/F3 10/Courier@0 SF
(TOP = USR_DISK:[JONES.SRC] ;)144 264 Q(SubInclude TOP util ;)144 288 Q
F0 .04(The v)108 304.8 R .04(ariable must ha)-.25 F .34 -.15(ve a v)-.2
H .04(alue that looks lik)-.1 F 2.54(ead)-.1 G .041(irectory or de)-2.54
F 2.541(vice. If)-.25 F .041(you choose, you can use a concealed)2.541 F
2.5(logical. F)108 316.8 R(or e)-.15 E(xample:)-.15 E F3(TOP = TOP: ;)
144 333.6 Q(SubInclude TOP util ;)144 357.6 Q F0(The)108 374.4 Q F1(:)
2.632 E F0 .132(at the end of T)2.632 F .132(OP mak)-.18 F .132
(es the v)-.1 F .131(alue of $\(T)-.25 F .131(OP\) look lik)-.18 F 2.631
(ead)-.1 G -.25(ev)-2.631 G .131(ice name, which).25 F F1(jam)2.631 E F0
.131(respects as a direc-)2.631 F
(tory name and will use when trying to access \214les.)108 386.4 Q -.18
(TO)5 G 2.5(Pm).18 G(ust then be de\214ned from DCL:)-2.5 E F3 6($d)144
403.2 S(efine/job/translation=concealed TOP DK100:[USERS.JONES.SRC.])-6
E F0 .126(Note three things: the concealed translation allo)108 420 R
.127(ws the logical to be used as a de)-.25 F .127(vice name; the de)
-.25 F .127(vice name)-.25 F .287(in the logical \(here DK100\) cannot \
itself be concealed logical \(VMS rules, man\); and the directory compo\
-)108 432 R
(nent of the de\214nition must end in a period \(more VMS rules\).)108
444 Q/F4 9/Times-Bold@0 SF(MISCELLANEOUS R)72 460.8 Q(ULES)-.27 E F1
(Clean Rule)87 472.8 Q F0(The)108 484.8 Q F2(Clean)2.951 E F0 .451
(rule has only a simple action: to delete all of its sources.)2.951 F
.452(It is normally in)5.452 F -.2(vo)-.4 G -.1(ke).2 G 2.952(dw).1 G
.452(ith generated)-2.952 F .334(\214les as sources, so that the)108
496.8 R 2.834(yc)-.15 G .334(an be cleaned out.)-2.834 F F2(Clean)5.334
E F0 .334(must in)2.834 F -.2(vo)-.4 G -.1(ke).2 G 2.834(dw).1 G .334
(ith a tar)-2.834 F .334(get as well, as dif)-.18 F .334(ferent sets)
-.25 F .717(of \214les might be cleaned on with dif)108 508.8 R .717
(ferent tar)-.25 F 3.217(gets. T)-.18 F 3.217(oa)-.8 G .717
(ctually remo)-3.217 F 1.017 -.15(ve t)-.15 H .718
(he \214les to be cleaned, you in).15 F -.2(vo)-.4 G -.1(ke).2 G F1(jam)
108 520.8 Q F0(with the tar)2.5 E(get name on the command line.)-.18 E
-.15(Fo)5 G 2.5(re).15 G(xample:)-2.65 E F3
(Clean zap : junk1 junk2 junk3 ;)144 537.6 Q F0(Saying ")108 554.4 Q F3
(jam zap)A F0 2.5("w)C(ould cause it to delete junk1, junk2, and junk3.)
-2.6 E .016(All rules listed in this manual page that generate tar)108
571.2 R .016(gets, e)-.18 F .016(xcept the)-.15 F F2(Install)2.516 E F0
.016(rules, in)2.516 F -.2(vo)-.4 G .216 -.1(ke t).2 H .015(he follo).1
F(wing)-.25 E F2(Clean)2.515 E F0(rule:)108 583.2 Q F3
(Clean clean : $\(<\) ;)144 600 Q F0(The)108 616.8 Q F2(Install)2.5 E F0
(rules in)2.5 E -.2(vo)-.4 G .2 -.1(ke t).2 H(he follo).1 E(wing:)-.25 E
F3(Clean uninstall : $\(<\) ;)144 633.6 Q F0 2.54(Thus a ")108 650.4 R
F3 2.54(jam uninstall)B F0 5.04("r)C(emo)-5.04 E -.15(ve)-.15 G 5.04(sa)
.15 G -.15(ny)-5.04 G 2.54(thing created with the).15 F F2(Install)5.04
E F0 2.54(rules, and a ")5.04 F F3 2.54(jam clean)B F0(")A(remo)108
662.4 Q -.15(ve)-.15 G 2.671(sa).15 G -.15(ny)-2.671 G .171
(thing created by the other rules listed in this manual page.).15 F .17
(It should be noted that)5.17 F F1(jam)2.67 E F0 1.27 -.55('s c)D(lean-)
.55 E(ing mechanism gets rid of e)108 674.4 Q(xactly the \214les it cre\
ated, not miscellaneous junk left around by the user)-.15 E(.)-.55 E(Gi)
108 691.2 Q -.15(ve)-.25 G 2.5(nu).15 G(ser)-2.5 E(-de\214ned tar)-.2 E
(gets, the)-.18 E F2(Clean)2.5 E F0(rule can selecti)2.5 E -.15(ve)-.25
G(ly remo).15 E .3 -.15(ve o)-.15 H(ther generated \214les.).15 E -.15
(Fo)5 G 2.5(re).15 G(xample:)-2.65 E F3(rule M4)144 708 Q({)144 720 Q F0
(10 March 1995)275.45 768 Q(10)193.45 E EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E/F1 10/Courier@0 SF 6(#F)192 84 S
(ile depends on it's m4 source)-6 E(DEPENDS $\(<\) : $\(>\) ;)192 108 Q
(Clean m4clean : $\(<\) ;)192 132 Q(})144 144 Q(actions M4)144 168 Q({)
144 180 Q(m4 < $\(>\) > $\(<\))192 192 Q(})144 204 Q F0(Here a ")108
220.8 Q F1(jam m4clean)A F0 2.5("w)C(ould remo)-2.6 E .3 -.15(ve a)-.15
H(ll \214les created by).15 E/F2 10/Times-Bold@0 SF(m4)2.5 E F0(.)A F2
(RmT)87 237.6 Q(emps Rule)-.92 E F0 .47
(Some intermediate \214les are meant to be temporary)108 249.6 R 5.47
(.T)-.65 G(he)-5.47 E/F3 10/Times-Italic@0 SF(RmT)2.97 E(emps)-.92 E F0
.47(rule marks such \214les with the)2.97 F F3(TEMPO-)2.97 E(RAR)108
261.6 Q(Y)-.18 E F0 1.005(rule, and then deletes them after the)3.505 F
3.505(ya)-.15 G 1.004(re used.)-3.505 F 2.604 -.8(To d)6.004 H 1.004
(elete them only when the).8 F 3.504(ya)-.15 G 1.004
(re \214nished being)-3.504 F(used,)108 273.6 Q F3(RmT)2.991 E(emps)-.92
E F0 .491(must be the last rule \(with actions\) in)2.991 F -.2(vo)-.4 G
-.1(ke).2 G 2.992(do).1 G 2.992(nt)-2.992 G .492(he tar)-2.992 F .492
(get that uses the temporary \214les, and)-.18 F(the sources to)108
285.6 Q F3(RmT)2.5 E(empts)-.92 E F0
(must be the temporary \214les themselv)2.5 E 2.5(es. F)-.15 F(or e)-.15
E(xample:)-.15 E F1(SpecialUserRuleA foo : bar ;)144 302.4 Q
(SpecialUserRuleB ola : foo ;)144 314.4 Q(RmTemps ola : foo ;)144 326.4
Q F0 1.951(This says: b)108 343.2 R 1.951(uild "foo" using)-.2 F F3
(SpecialUserRuleA)4.451 E F0 1.951(and "ola" using)4.451 F F3
(SpecialUserRuleB)4.451 E F0 6.951(.O)C 1.95(nce that is done,)-6.951 F
(remo)108 355.2 Q .3 -.15(ve ")-.15 H(foo".).15 E/F4 9/Times-Bold@0 SF
(SPECIAL T)72 372 Q(ARGETS)-.81 E F2 -.15(Ja)108 384 S(m).15 E F0 .159
(has only one special tar)2.659 F(get:)-.18 E F3(all)2.659 E F0 2.659
(,w)C .159(hich it tries to b)-2.659 F .159(uild if no tar)-.2 F .159
(gets are on the command line.)-.18 F F2 -.15(Ja)5.159 G(mbase).15 E F0
(de\214nes se)108 396 Q -.15(ve)-.25 G(ral special tar).15 E
(gets which are dependencies of)-.18 E F3(all)2.5 E F0(:)A F1 72(all -)
144 412.8 R(parent of first, shell, files, lib, exe)6 E 60(first -)144
424.8 R(first dependency of 'all', for potential initialization)6 E 60
(shell -)144 436.8 R(parent of all Shell targets)6 E 60(files -)144
448.8 R(parent of all File targets)6 E 72(lib -)144 460.8 R
(parent of all Library targets)6 E 72(exe -)144 472.8 R
(parent of all Main target)6 E 66(dirs -)144 484.8 R
(parent of all MkDir targets)6 E 60(clean -)144 496.8 R
(removes all Shell, File, Library, and Main targets)6 E 36(uninstall -)
144 508.8 R(removes all Install targets)6 E F2 -.15(Ja)108 525.6 S
(mbase).15 E F0 .456(marks all of these tar)2.956 F .456(gets with)-.18
F F2(jam)2.956 E F0 -.55('s)C F3(NO)3.506 E(TFILE)-.4 E F0(attrib)2.956
E .456(ute, meaning that the)-.2 F 2.956(ya)-.15 G(ren')-2.956 E 2.956
(tt)-.18 G 2.956(ob)-2.956 G 2.955(ef)-2.956 G .455(ound in)-2.955 F .75
(the \214lesystem.)108 537.6 R -1.1(Yo)5.75 G 3.25(uc)1.1 G .75(an b)
-3.25 F .75(uild selected components by gi)-.2 F(ving)-.25 E F3(shell)
3.251 E F0(,)A F3(\214les)3.251 E F0(,)A F3(lib)3.251 E F0(,)A F3 -.2
(ex)3.251 G(e).2 E F0 3.251(,o)C(r)-3.251 E F3(dir)3.251 E(s)-.1 E F0
.751(as tar)3.251 F .751(gets on the)-.18 F .381(command line.)108 549.6
R -1.1(Yo)5.381 G 2.881(uc)1.1 G .381(an remo)-2.881 F .681 -.15(ve t)
-.15 H .381(he \214les that).15 F F2(jam)2.881 E F0 -.2(bu)2.881 G .381
(ilt gi).2 F(ving)-.25 E F3(clean)2.88 E F0(and)2.88 E F3(uninstall)2.88
E F0 .38(as tar)2.88 F 2.88(gets. And)-.18 F .38(you can)2.88 F
(arrange for)108 561.6 Q F2(jam)2.5 E F0
(to run initialization commands by putting actions on the tar)2.5 E(get)
-.18 E F3<8c72>2.5 E(st)-.1 E F0 5(.F)C(or e)-5.15 E(xample:)-.15 E F1
(actions Initialize)144 578.4 Q({)144 590.4 Q
(ECHO "This is a test of the jam initialization system.")180 602.4 Q(})
144 614.4 Q(Initialize first ;)144 638.4 Q F0(This only gets run if)108
655.2 Q F2(jam)2.5 E F0(is in)2.5 E -.2(vo)-.4 G -.1(ke).2 G 2.5(dw).1 G
(ith the)-2.5 E F3(all)2.5 E F0(or)2.5 E F3<8c72>2.5 E(st)-.1 E F0(tar)
2.5 E(gets, or no tar)-.18 E(get at all.)-.18 E F4 -.27(JA)72 672 S 2.25
(MB).27 G(UIL)-2.34 E -.828(T-)-.828 G(IN R).828 E(ULES AND V)-.27 E
(ARIABLES)-1.215 E F0 1.309(This section discusses)108 684 R F2(jam)
3.809 E F0 2.409 -.55('s b)D 1.309(uilt-in rules and v).35 F 6.309
(ariables. The)-.25 F 3.809(ya)-.15 G 1.309(re described in)-3.809 F F2
(jam)3.81 E F0 1.31(\(1\) more precisely)B(.)-.65 E .412
(Built-in rules are uppercase, as opposed to the mix)108 696 R .412
(ed-case rules de\214ned by)-.15 F F2 -.15(Ja)2.912 G(mbase).15 E F0
5.412(.T)C .412(hese b)-5.412 F .412(uilt-in rules,)-.2 F .803
(along with the other)108 708 R F2(jam)3.303 E F0 .803
(syntax for manipulating v)3.303 F .803(ariables, pro)-.25 F .804
(vide the foundation upon which the)-.15 F F2 -.15(Ja)3.304 G(m-).15 E
(base)108 720 Q F0 1.744(is b)4.244 F 4.244(uilt. A)-.2 F F2 -.15(Ja)
4.244 G(m\214le).15 E F0 4.244(,o)C 4.244(r\()-4.244 G 1.743(more lik)
-4.244 F 1.743(ely\) a)-.1 F F2 -.15(Ja)4.243 G(mrules).15 E F0(\(q.v)
4.243 E 1.743(.\), can mak)-.65 F 4.243(eu)-.1 G 1.743(se of these b)
-4.243 F 1.743(uilt-in rules and)-.2 F(10 March 1995)275.45 768 Q(11)
193.45 E EP
%%Page: 12 12
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E -.25(va)108 84 S(riables as well.).25 E/F1 10
/Times-Bold@0 SF(DEPENDS, INCLUDES Rules)87 100.8 Q F0 -1 -.8(Tw o)108
112.8 T 1.07(rules b)4.37 F 1.07(uild the dependenc)-.2 F 3.57(yg)-.15 G
(raph.)-3.57 E/F2 10/Times-Italic@0 SF(DEPENDS)6.07 E F0 1.07
(simply mak)3.57 F 1.07(es its sources dependencies of its tar)-.1 F
(gets.)-.18 E F2(INCLUDES)108 124.8 Q F0(mak)2.56 E .06
(es its sources dependencies of an)-.1 F .06(ything of which its tar)
-.15 F .06(gets are dependencies.)-.18 F .06(This re\215ects)5.06 F 1.6
(the dependencies that arise when one source \214le includes another: t\
he object b)108 136.8 R 1.601(uilt from the source \214le)-.2 F .326
(depends both on the original and included source \214le, b)108 148.8 R
.326(ut the tw)-.2 F 2.826(os)-.1 G .326(ources \214les don')-2.826 F
2.826(td)-.18 G .326(epend on each other)-2.826 F(.)-.55 E -.15(Fo)108
160.8 S 2.5(re).15 G(xample:)-2.65 E/F3 10/Courier@0 SF
(DEPENDS foo.o : foo.c ;)144 177.6 Q(INCLUDES foo.c : foo.h ;)144 189.6
Q F0(Both "foo.c" and "foo.h" become dependencies of "foo.o" in this e)
108 206.4 Q(xample.)-.15 E F1(AL)87 223.2 Q -1.1 -1.2(WA Y)-.92 H
(S, LEA)1.2 E(VES, NOCARE, NO)-1.45 E(TFILE, NOUPD)-.4 E -.95(AT)-.35 G
(E, TEMPORAR).95 E 2.5(YR)-.35 G(ules)-2.5 E F0 .054(Six rules mark tar)
108 235.2 R .054(gets so that)-.18 F F1(jam)2.554 E F0 .054
(treats them dif)2.554 F .054(ferently during its tar)-.25 F .054
(get binding and updating phase.)-.18 F(Nor)5.055 E(-)-.2 E(mally)108
247.2 Q(,)-.65 E F1(jam)2.65 E F0 .15(updates a tar)2.65 F .149(get if \
it is missing, if its \214lesystem modi\214cation time is older than an)
-.18 F 2.649(yo)-.15 G 2.649(fi)-2.649 G .149(ts depen-)-2.649 F .474
(dencies \(recursi)108 259.2 R -.15(ve)-.25 G .474(ly\), or if an).15 F
2.974(yo)-.15 G 2.974(fi)-2.974 G .474
(ts dependencies are being updated.)-2.974 F .475(This basic beha)5.475
F .475(vior can be changed)-.2 F(by in)108 271.2 Q -.2(vo)-.4 G
(king the follo).2 E(wing rules with the tar)-.25 E
(get name as the rule')-.18 E 2.5(st)-.55 G(ar)-2.5 E(get:)-.18 E(The)
108 288 Q F2(AL)3.095 E -1.85 -.6(WA Y)-.55 H(S).6 E F0 .595
(rule causes its tar)3.095 F .595(gets to be al)-.18 F -.1(wa)-.1 G .594
(ys updated.).1 F .594(This is used for the)5.594 F F2(clean)3.094 E F0
(and)3.094 E F2(uninstall)3.094 E F0(tar)3.094 E(gets,)-.18 E .44
(as the)108 300 R 2.94(yh)-.15 G -2.25 -.2(av e)-2.94 H .44
(no dependencies and w)3.14 F .44(ould otherwise appear ne)-.1 F -.15
(ve)-.25 G 2.941(rt).15 G 2.941(on)-2.941 G .441(eed b)-2.941 F 2.941
(uilding. It)-.2 F .441(is best applied to tar)2.941 F(-)-.2 E
(gets that are also)108 312 Q F2(NO)2.5 E(TFILE)-.4 E F0(tar)2.5 E
(gets, b)-.18 E
(ut it can also be used to force a real \214le to be updated as well.)
-.2 E(The)108 328.8 Q F2(NOCARE)3.635 E F0 1.135(rule causes)3.635 F F1
(jam)3.635 E F0 1.135(to ignore its tar)3.635 F 1.135(gets if the)-.18 F
3.635(yc)-.15 G(an')-3.635 E 3.635(tb)-.18 G 3.635(ef)-3.635 G 1.135
(ound and ha)-3.635 F 1.435 -.15(ve n)-.2 H 3.635(ou).15 G 1.135
(pdating actions.)-3.635 F(Normally)108 340.8 Q(,)-.65 E F1(jam)3.586 E
F0 1.086(issues a w)3.586 F 1.086(arning about a tar)-.1 F 1.086
(get that can')-.18 F 3.586(tb)-.18 G 3.586(eb)-3.586 G 1.086
(uilt and then refuses to b)-3.786 F 1.087(uild an)-.2 F 1.087
(ything that)-.15 F .052(depends on that tar)108 352.8 R 2.551(get. The)
-.18 F F2(HdrRule)2.551 E F0(uses)2.551 E F2(NOCARE)2.551 E F0 .051
(on the header \214le names found during header \214le scan-)2.551 F
.511(ning, to let)108 364.8 R F1(jam)3.011 E F0(kno)3.011 E 3.011(wt)
-.25 G .511(hat the included \214les may not e)-3.011 F 3.012(xist. F)
-.15 F .512(or e)-.15 F .512(xample, if a #include is within an #ifdef,)
-.15 F(the included \214le may not actually be around.)108 376.8 Q(The)
108 393.6 Q F2(NO)3.749 E(TFILE)-.4 E F0 1.249(rule marks its tar)3.749
F 1.249(gets as being pseudo tar)-.18 F 1.249(gets, that is, tar)-.18 F
1.249(gets that aren')-.18 F 3.748(tr)-.18 G 1.248(eally \214les.)-3.748
F(The)6.248 E .827(actions on such a tar)108 405.6 R .827
(get are only e)-.18 F -.15(xe)-.15 G .827(cuted if the tar).15 F(get')
-.18 E 3.327(sd)-.55 G .828(ependencies are updated, or if the tar)
-3.327 F .828(get is also)-.18 F(mark)108 417.6 Q(ed with)-.1 E F2(AL)
2.5 E -1.85 -.6(WA Y)-.55 H(S).6 E F0 5(.T)C(he)-5 E F2(all)2.5 E F0
(and)2.5 E F2(clean)2.5 E F0(tar)2.5 E(gets are e)-.18 E
(xamples of such tar)-.15 E(gets.)-.18 E(The)108 434.4 Q F2(NOUPD)2.875
E -.37(AT)-.35 G(E).37 E F0 .374(rule causes)2.875 F F1(jam)2.874 E F0
.374(to ignore the modi\214cation time of the tar)2.874 F 2.874
(get. This)-.18 F .374(has tw)2.874 F 2.874(oe)-.1 G -.25(ff)-2.874 G
2.874(ects: \214rst,).25 F .722(once the tar)108 446.4 R .723
(get has been created it will ne)-.18 F -.15(ve)-.25 G 3.223(rb).15 G
3.223(eu)-3.223 G .723(pdated; second, manually updating tar)-3.223 F
.723(get will not cause)-.18 F .173(other tar)108 458.4 R .173
(gets to be updated.)-.18 F .172
(This rule is applied to directories by the)5.172 F F2(MkDir)2.672 E F0
.172(rule, because)2.672 F F2(MkDir)2.672 E F0 .172(only cares)2.672 F
(that the tar)108 470.4 Q(get directory e)-.18 E
(xists, not when it has last been updated.)-.15 E(The)108 487.2 Q F2
(TEMPORAR)3.03 E(Y)-.18 E F0 .53(rule allo)3.03 F .53(ws for tar)-.25 F
.53(gets to be deleted after the)-.18 F 3.03(ya)-.15 G .53
(re generated.)-3.03 F(If)5.53 E F1(jam)3.03 E F0 .53
(sees that a tempo-)3.03 F .822(rary tar)108 499.2 R .822
(get is missing, it will use the tar)-.18 F(get')-.18 E 3.322(sp)-.55 G
(arent')-3.322 E 3.322(st)-.55 G .822(ime when determining if the tar)
-3.322 F .821(get needs updating.)-.18 F .377
(Object \214les that are also archi)108 511.2 R -.15(ve)-.25 G 2.877(di)
.15 G 2.877(nal)-2.877 G .377(ibrary are mark)-2.877 F .377
(ed as such, so that the)-.1 F 2.877(yc)-.15 G .377
(an be deleted after the)-2.877 F 2.878(ya)-.15 G(re)-2.878 E(archi)108
523.2 Q -.15(ve)-.25 G(d.).15 E(The)108 540 Q F2(LEA)2.733 E(VES)-1.05 E
F0 .233(rule mak)2.733 F .233(es each of the tar)-.1 F .232
(gets depend only on its "leaf" dependencies.)-.18 F .232(This mak)5.232
F .232(es it immune)-.1 F .131(to its dependencies being updated, as th\
e "leaf" dependencies are those without their o)108 552 R .131
(wn dependencies and)-.25 F(without updating actions.)108 564 Q
(This allo)5 E(ws a tar)-.25 E
(get to be updated only if original source \214les change.)-.18 E F1
(ECHO, EXIT Rules)87 580.8 Q F0 1.208(These tw)108 592.8 R 3.708(or)-.1
G 1.208(ules help during the)-3.708 F F1 -.15(Ja)3.708 G(m\214le).15 E
F0 1.208(compiling phase.)3.708 F(The)6.208 E F2(ECHO)3.708 E F0 1.207
(rule just echoes its tar)3.708 F 1.207(gets to the)-.18 F
(standard output.)108 604.8 Q(The)5 E F2(EXIT)2.5 E F0
(rule does the same and then does a brutal, f)2.5 E(atal e)-.1 E(xit of)
-.15 E F1(jam)2.5 E F0(.)A F1(SEARCH, LOCA)87 621.6 Q(TE V)-.95 E
(ariables)-.92 E F0 .48(These tw)108 633.6 R 2.98(ov)-.1 G .48
(ariables control the binding of tar)-3.23 F .481
(get names to real \214les: the)-.18 F 2.981(yi)-.15 G .481
(ndicate what path name is to be)-2.981 F .504(prepended to the tar)108
645.6 R .503(get name to get to the real \214le.)-.18 F .503
($\(SEARCH\) pro)5.503 F .503(vides a list of directories along which)
-.15 F F1(jam)108 657.6 Q F0 .376(scans looking for a tar)2.876 F 2.876
(get. $\(LOCA)-.18 F .376(TE\) o)-1.11 F -.15(ve)-.15 G .377
(rrides $\(SEARCH\), indicating the directory where the tar).15 F(-)-.2
E 1.676(get must be.)108 669.6 R(Normally)6.676 E 4.176(,$)-.65 G 1.676
(\(SEARCH\) is set for e)-4.176 F 1.676(xisting tar)-.15 F 1.676
(gets while $\(LOCA)-.18 F 1.675(TE\) is set for the tar)-1.11 F(gets)
-.18 E(which)108 681.6 Q F1(jam)3.623 E F0 1.123(must b)3.623 F 3.623
(uild. If)-.2 F 1.123(neither $\(SEARCH\) nor $\(LOCA)3.623 F 1.123
(TE\) are set, or if the name of the tar)-1.11 F 1.124(get is a)-.18 F
(rooted \214le name \(i.e. on UNIX be)108 693.6 Q
(ginning with "/"\), then the \214le name is assumed to be the tar)-.15
E(get name.)-.18 E .172(Both $\(SEARCH\) and $\(LOCA)108 710.4 R .172
(TE\) should be set tar)-1.11 F .171(get-speci\214c and not globally)
-.18 F 5.171(.I)-.65 G 2.671(ft)-5.171 G(he)-2.671 E 2.671(yw)-.15 G
.171(ere set globally)-2.671 F(,)-.65 E F1(jam)108 722.4 Q F0 -.1(wo)
2.726 G .226
(uld use them for all \214le binding - including looking for the).1 F F2
-.35(Ja)2.726 G(m\214le).35 E F0 2.726(,a)C .226(nd this is not lik)
-2.726 F .226(ely to produce)-.1 F(10 March 1995)275.45 768 Q(12)193.45
E EP
%%Page: 13 13
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E 1.145(sane results.)108 84 R 1.145
(All of the rules de\214ned in)6.145 F/F1 10/Times-Bold@0 SF -.15(Ja)
3.644 G(mbase).15 E F0 1.144
(\(and described in this document\) set $\(SEARCH\) and)3.644 F($\(LOCA)
108 96 Q .37(TE\) to sensible v)-1.11 F .37(alues for sources the)-.25 F
2.87(ya)-.15 G .37(re looking for and tar)-2.87 F .37(gets the)-.18 F
2.87(yc)-.15 G .37(reate, respecti)-2.87 F -.15(ve)-.25 G(ly).15 E 5.37
(.T)-.65 G(hese)-5.37 E -.25(va)108 108 S 2.437
(lues are usually $\(SEARCH_SOURCE\) and $\(LOCA).25 F(TE_T)-1.11 E
2.437(ARGET\), described abo)-.93 F 2.737 -.15(ve i)-.15 H 4.937(nt).15
G 2.437(he section)-4.937 F .3(describing v)108 120 R .3
(ariables use when b)-.25 F .3(uilding whole directory trees.)-.2 F .3
(The header \214le processing rule)5.3 F/F2 10/Times-Italic@0 SF
(HdrRule)2.8 E F0(sets)2.8 E
($\(SEARCH\) for header \214les to be $\(HDRS\).)108 132 Q 1.871
(When writing your o)108 148.8 R 1.871(wn rules, especially ones not b)
-.25 F 1.871(uilt upon those in)-.2 F F1 -.15(Ja)4.37 G(mbase).15 E F0
4.37(,y)C 1.87(ou may need to set)-4.37 F 5.336($\(SEARCH\) or $\(LOCA)
108 160.8 R 5.336(TE\) directly)-1.11 F 10.336(.M)-.65 G 5.336
(ost often you')-10.336 F 5.336(ll set them to the pre)-.1 F -.25(va)
-.25 G 5.337(iling v).25 F 5.337(alue of)-.25 F
($\(SEARCH_SOURCE\) or $\(LOCA)108 172.8 Q(TE_T)-1.11 E 2.5
(ARGET\). The)-.93 F(best e)2.5 E(xamples are those in)-.15 E F1 -.15
(Ja)2.5 G(mbase).15 E F0(.)A F1(HDRSCAN, HDRR)87 189.6 Q(ULE V)-.3 E
(ariables)-.92 E F0 .528(These tw)108 201.6 R 3.028(ov)-.1 G .528
(ariable control header \214le scanning.)-3.278 F .527
(The \214rst is an)5.528 F F1(egr)3.027 E(ep)-.18 E F0 .527
(\(1\) pattern, with \(\)')B 3.027(ss)-.55 G .527(urrounding the)-3.027
F .484(\214le name, used to \214nd \214le inclusion statements in sourc\
e \214les.)108 213.6 R .484(The second is the name of a rule to in)5.484
F -.2(vo)-.4 G -.1(ke).2 G .715
(with the results of the scan: the scanned \214le is the tar)108 225.6 R
.715(get, the found \214les are the sources.)-.18 F .714
(This is the only)5.714 F(place where)108 237.6 Q F1(jam)2.5 E F0(in)2.5
E -.2(vo)-.4 G -.1(ke).2 G 2.5(sar).1 G(ule through a v)-2.5 E
(ariable setting.)-.25 E .464(Both $\(HDRSCAN\) and $\(HDRR)108 254.4 R
.464(ULE\) must be set for header \214le scanning to tak)-.4 F 2.965(ep)
-.1 G .465(lace, and the)-2.965 F 2.965(ys)-.15 G(hould)-2.965 E 2.433
(be set tar)108 266.4 R 2.433(get-speci\214c and not globally)-.18 F
7.433(.I)-.65 G 4.933(ft)-7.433 G(he)-4.933 E 4.933(yw)-.15 G 2.433
(ere set globally)-4.933 F 4.932(,a)-.65 G 2.432
(ll \214les, including e)-4.932 F -.15(xe)-.15 G 2.432(cutables and).15
F(libraries, w)108 278.4 Q
(ould be scanned for header \214le include statements.)-.1 E .63
(The scanning for header \214le inclusions is not e)108 295.2 R .63
(xact, b)-.15 F .63(ut it is at least dynamic.)-.2 F .63
(That is, there is no need to)5.63 F 2.229(run something lik)108 307.2 R
(e)-.1 E F1(mak)4.729 E(edepend)-.1 E F0 2.229
(\(GNU\) to create a static dependenc)B 4.728<798c>-.15 G 4.728
(le. Because)-4.728 F F1(jam)4.728 E F0 2.228(uses re)4.728 F(gular)-.15
E -.15(ex)108 319.2 S .398(pressions to \214nd include \214les, it can')
.15 F 2.899(tk)-.18 G(no)-2.899 E 2.899(ww)-.25 G .399
(hen an include is within #ifdefs or other conditional logic.)-2.899 F
2.206 -.8(To m)108 331.2 T(ak).8 E 3.106(eu)-.1 G 3.106(pf)-3.106 G .606
(or this,)-3.106 F F2(HdrRule)3.106 E F0 .606(applies the)3.106 F F2
(NOCARE)3.106 E F0 .605
(rule to each header \214le, just in case it is bogus.)3.106 F(Also,)
5.605 E(re)108 343.2 Q .148(gular e)-.15 F .148(xpressions only w)-.15 F
.149
(ork where the included \214le name is literally in the source \214le.)
-.1 F(The)5.149 E 2.649(yc)-.15 G(an')-2.649 E 2.649(th)-.18 G(andle)
-2.649 E(languages that allo)108 355.2 Q 2.5(wi)-.25 G
(ncluding \214les using v)-2.5 E(ariable names \(as)-.25 E F1(jam)2.5 E
F0 1.1 -.55('s o)D(wn lang).3 E(auge does\).)-.05 E F1 -.3(JA)87 372 S
(MSHELL V).3 E(ariable \(Unix Only\))-.92 E F0(When)108 384 Q F1(jam)
2.578 E F0 -.15(exe)2.578 G .078(cutes a rule').15 F 2.578(sa)-.55 G
.078(ction block, it forks and e)-2.578 F -.15(xe)-.15 G .078
(cs a shell, passing the action block as an ar).15 F(gument)-.18 E
(to the shell.)108 396 Q(The in)5 E -.2(vo)-.4 G
(cation of the shell is controlled by $\(J).2 E(AMSHELL\), whose def)-.6
E(ault v)-.1 E(alue is:)-.25 E/F3 10/Courier@0 SF
(JAMSHELL = /bin/sh -c % ;)144 412.8 Q F0(The)108 429.6 Q F1(%)2.5 E F0
(is replaced with the te)2.5 E(xt of the action block.)-.15 E .028
(On UNIX)108 446.4 R F1(jam)2.528 E F0 .029(can b)2.529 F .029(uild tar)
-.2 F .029(gets in parallel, as long as the dependencies among \214les \
are properly spelled out)-.18 F .03(and actions don')108 458.4 R 2.53
(tc)-.18 G .03(reate \214x)-2.53 F .03
(ed named \214les in the current directory)-.15 F 5.03(.\()-.65 G .03
(If either of those tw)-5.03 F 2.53(op)-.1 G(ro)-2.53 E .03
(visions are vio-)-.15 F(lated,)108 470.4 Q F1(jam)2.781 E F0 .281
(can trip o)2.781 F -.15(ve)-.15 G 2.781(ri).15 G .281(tself when b)
-2.781 F .281(uilding in parallel things which just happen to b)-.2 F
.282(uild OK sequentially)-.2 F(.\))-.65 E(When b)108 482.4 Q
(uilding in parallel,)-.2 E F1(jam)2.5 E F0(simply forks of)2.5 E 2.5
(fm)-.25 G(ore than one shell at a time.)-2.5 E F1 -.15(Ja)108 499.2 S
(m).15 E F0 .457(does not directly support b)2.957 F .456
(uilding in parallel across multiple hosts, since that is hea)-.2 F .456
(vily dependent on)-.2 F .127(the local en)108 511.2 R 2.627
(vironment. T)-.4 F 2.627(ob)-.8 G .128
(uild in parallel across multiple hosts, you need to write your o)-2.827
F .128(wn shell that pro-)-.25 F(vides access to the multiple hosts.)108
523.2 Q -1.1(Yo)5 G 2.5(ut)1.1 G(hen reset $\(J)-2.5 E
(AMSHELL\) to reference it.)-.6 E .278(Just as)108 540 R F1(jam)2.778 E
F0 -.15(ex)2.778 G .278(pands a).15 F F1(%)2.778 E F0 .278(to be the te)
2.778 F .278(xt of the rule')-.15 F 2.778(sa)-.55 G .278
(ction block, it e)-2.778 F .278(xpands a)-.15 F F1(!)2.778 E F0 .277
(to be the multi-process slot)2.778 F(number)108 552 Q 5.027(.T)-.55 G
.027(he slot number v)-5.027 F .028
(aries between 1 and the number of concurrent jobs permitted by the)-.25
F F1(-j)2.528 E F0 .028(\215ag gi)2.528 F -.15(ve)-.25 G(n).15 E
(on the command line.)108 564 Q
(Armed with this, it is possible to write a multiple host shell.)5 E
-.15(Fo)5 G 2.5(re).15 G(xample:)-2.65 E F3(#!/bin/sh)144 580.8 Q 6(#T)
144 604.8 S
(his sample JAMSHELL uses the SunOS on\(1\) command to execute)-6 E 6
(#ac)144 616.8 S
(ommand string with an identical environment on another host.)-6 E(#)144
628.8 Q 6(#S)144 640.8 S(et JAMSHELL = jamshell ! %)-6 E(#)144 652.8 Q 6
(#w)144 664.8 S(here jamshell is the name of this shell file.)-6 E(#)144
676.8 Q 6(#T)144 688.8 S
(his version handles up to -j6; after that they get executed)-6 E 6(#l)
144 700.8 S(ocally.)-6 E(case $1 in)144 724.8 Q F0(10 March 1995)275.45
768 Q(13)193.45 E EP
%%Page: 14 14
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF -.6(JA)72 48 S 361.16(MFILE\(5\) J).6 F
(AMFILE\(5\))-.6 E/F1 10/Courier@0 SF 6(1|4\) on)144 84 R
(winken sh -c "$2";;)6 E 6(2|5\) on)144 96 R(blinken sh -c "$2";;)6 E 6
(3|6\) on)144 108 R(nod sh -c "$2";;)6 E 18(*\) eval)144 120 R("$2";;)6
E(esac)144 132 Q/F2 9/Times-Bold@0 SF(SEE ALSO)72 148.8 Q/F3 10
/Times-Bold@0 SF(jam)108 160.8 Q F0(\(1\),)A F3 -.15(Ja)2.5 G(mbase).15
E F0(\(5\))A F2 -.09(BU)72 177.6 S(GS).09 E F0(This document shouldn')
108 189.6 Q 2.5(tb)-.18 G 2.5(eam)-2.5 G(anual page.)-2.5 E F2 -.45(AU)
72 206.4 S(THOR).45 E F0(Christopher Seiw)108 218.4 Q(ald \(seiw)-.1 E
(ald@p3.com\))-.1 E(10 March 1995)275.45 768 Q(14)193.45 E EP
%%Trailer
end
%%EOF
